# === Arborescence du dossier ===

hash_tool
├── docs
│   ├── explication-run-tests.md
│   ├── manuel.md
│   ├── progression-eta.md
│   └── validation.md
├── mon_dossier
│   ├── destination
│   │   ├── fichier (1).txt
│   │   ├── fichier (2).txt
│   │   ├── fichier (3).txt
│   │   └── fichier (4).txt
│   └── source
│       ├── fichier (1).txt
│       ├── fichier (2).txt
│       ├── fichier (3).txt
│       └── fichier (4).txt
├── tests
│   └── run_tests.sh
├── CHANGELOG.md
├── README.md
├── TODO.md
├── hash_1.b3
├── hash_2.b3
├── integrity.sh
└── temp.txt


# === Contenu des fichiers ===

--- Fichier : CHANGELOG.md ---
# Changelog — hash_tool / integrity.sh

## [0.6] — Robustesse et mode silencieux

### Ajouté
- `integrity.sh`
  - Flag `--quiet` : supprime toute sortie terminal, écrit uniquement dans les fichiers de résultats (`recap.txt`, `failed.txt`). Exit code propagé pour usage CI/cron.
  - Fonction `say()` : point d'entrée unique pour toute sortie terminal, désactivée si `--quiet`.
  - Fonction `file_size()` : abstraction portable `stat -c%s` (GNU/Linux) / `stat -f%z` (BSD/macOS).
  - Vérification version bash en tête de script : `bash >= 4` requis, exit explicite avec message si non respecté.
  - `make_result_dir()` : horodatage automatique des dossiers de résultats en cas de collision (`_YYYYMMDD-HHMMSS`), plus d'écrasement silencieux.
  - `trap EXIT` dans `run_compare()` : nettoyage garanti des fichiers temporaires même en cas d'erreur intermédiaire.
  - Redirection ETA sur `/dev/tty` dans `compute_with_progress()` : garantit que la progression n'est jamais écrite dans le fichier `.b3`.
- `tests/run_tests.sh`
  - `set -euo pipefail` : mode strict complet activé (ajout de `-e`).
  - Fonction `assert_file_absent()` : helper dédié pour les assertions d'absence de fichier.
  - T00 : ShellCheck sur `integrity.sh` et `run_tests.sh` (SKIP propre si non installé).
  - T12 : couverture exhaustive du mode `--quiet` (stdout vide, fichiers produits, exit code propagé).
  - T13 : vérifie l'horodatage automatique des dossiers de résultats sur collision.
  - T14 : détection d'un argument `[dossier]` invalide pour `verify`.
- `README.md`
  - Section `--quiet` avec exemples CI/cron.
  - Section Tests avec instructions d'exécution et comptage des cas (14 tests).
  - Mention horodatage automatique dans l'arborescence des résultats.

### Modifié
- `integrity.sh`
  - `assert_target_valid()` : `find -print0 | grep -zc ''` au lieu de `find | wc -l` — robuste aux noms de fichiers contenant des newlines.
  - `run_verify()` : comptage de lignes via `grep -c '^'` au lieu de `grep -c '.'` — correction du bug de comptage sur flux vide.
  - `run_compare()` : `sort -k2,2` au lieu de `sort -k2` — clé de tri limitée strictement au champ chemin, sans déborder sur le hash.
  - `run_verify()` : propagation de l'exit code de `b3sum --check` via `return $exit_code` — utilisable en scripting avec `|| alert`.
  - `failed.txt` : suppression explicite via `rm -f` si `nb_failed == 0` après une vérification OK suivant un échec précédent.
- `tests/run_tests.sh`
  - Résolution dynamique des `outdir` via `ls -d ... | tail -1` : compatible avec l'horodatage des dossiers de résultats.
  - T02, T03, T05, T06, T07 : assertions adaptées à la résolution dynamique des dossiers.
- `README.md`
  - Dépendances : mention explicite de `bash >= 4`.
  - Usage : exemple `--quiet` ajouté.

### Corrigé
- `integrity.sh`
  - Bug comptage lignes dans `run_verify()` : `grep -c '.'` sur flux vide retournait 0 mais ne capturait pas correctement les lignes non vides. Remplacé par `grep -c '^'`.
  - Bug tri ambigü dans `run_compare()` : `sort -k2` triait du champ 2 à la fin de ligne, incluant potentiellement le hash. `sort -k2,2` limite la clé au seul champ 2.
  - Bug nettoyage tmpfiles : `run_compare()` laissait des fichiers temporaires en cas d'erreur intermédiaire. Ajout de `trap 'rm -f ...' EXIT`.
  - Bug portabilité `stat` : `stat -c%s` est GNU-only. Ajout de `file_size()` avec fallback BSD `stat -f%z`.
  - Bug comptage fichiers avec newlines : `assert_target_valid()` utilisait `find | wc -l`. Corrigé avec `find -print0 | grep -zc ''`.
- `tests/run_tests.sh`
  - T10 : pattern `"^/"` remplacé par `"  /"` — `grep` opérait sur une chaîne, l'ancre `^` ne matchait pas la deuxième colonne.

---

## [0.5] — Documentation

### Modifié
- `README.md` — règle répertoire de travail pour `verify` précisée : l'argument `[dossier]` est le répertoire d'origine du compute, pas le dossier haché. Exemples correct/incorrect ajoutés.
- `docs/manuel.md` — section `verify` mise à jour avec le même avertissement et les exemples.

---

## [0.4] — Gardes-fous et signalisation des erreurs

### Modifié
- `integrity.sh`
  - Ajout de `die()` : point de sortie unique pour toutes les erreurs, message sur stderr.
  - Ajout de `assert_b3_valid()` : vérifie existence, type fichier, non-vide, format b3sum valide.
  - Ajout de `assert_target_valid()` : vérifie existence du dossier cible et présence d'au moins un fichier.
  - Validation explicite des arguments dans chaque branche du `case` avant tout traitement.
  - `verify` accepte un argument optionnel `[dossier]` : fait `cd` avant `b3sum --check`.
  - Résolution du chemin absolu du `.b3` avant `cd` (correction bug : chemin relatif invalide après changement de répertoire).
  - `RESULTATS_DIR` : `${RESULTATS_DIR:-...}` au lieu d'assignation inconditionnelle — respecte la valeur exportée par l'environnement (fix tests).
  - Suppression de `local hashfile_abs` hors fonction (illégal en bash hors contexte fonction).
  - `run_verify()` : refonte de la signalisation.
    - Trois états distincts : `OK`, `ECHEC`, `ERREUR`.
    - Terminal : affichage sobre si OK, bloc `████` visible si échec ou erreur.
    - `recap.txt` : compteur `FAILED` affiché uniquement si > 0 ; section erreurs b3sum séparée.
    - `failed.txt` : créé uniquement si `nb_failed > 0` ou erreurs b3sum présentes. Supprimé si tout est OK.
- `tests/run_tests.sh`
  - T02 : assertion `failed.txt absent si 0 échec` (logique inversée par rapport à l'ancienne version).
  - T03 : patterns mis à jour (`ECHEC`, `FAILED`) alignés sur le nouveau format de sortie.

---

## [0.3] — Dossiers de résultats (verify et compare)

### Modifié
- `integrity.sh`
  - Ajout de `RESULTATS_DIR` (configurable, défaut `~/integrity_resultats`).
  - Ajout de `make_result_dir()` : crée `resultats_<nom_base>/` sous `RESULTATS_DIR`.
  - `verify` : délègue à `run_verify()` — produit `recap.txt` et `failed.txt`.
  - `compare` : délègue à `run_compare()` — produit `recap.txt`, `modifies.b3`, `disparus.txt`, `nouveaux.txt`.
  - Fichiers temporaires de `compare` passent par `mktemp` (plus de `/tmp/_old.b3` en dur).
  - Signature `verify` simplifiée : `<base.b3>` uniquement (le dossier n'était pas utilisé par `b3sum --check`).
- `README.md` — usage `verify` et `compare` mis à jour ; section Configuration ajoutée avec arbre des fichiers produits.
- `docs/manuel.md` — sections `verify` et `compare` mises à jour ; arbre de décision et référence rapide alignés.
- `tests/run_tests.sh`
  - `RESULTATS_DIR` exporté vers `WORKDIR` pour isoler les résultats des tests.
  - Ajout de `assert_file_exists()`.
  - T02–T07 : assertions sur la présence et le contenu des fichiers de résultats.

---

## [0.2] — Intégration ETA et tests automatisés

### Modifié
- `integrity.sh`
  - Suppression de `detect_parallelism()` et de la logique SSD/parallélisme (hors périmètre HDD gros volumes).
  - Mode `compute` : délègue à `compute_with_progress()`.
  - Ajout de `compute_with_progress()` : boucle fichier par fichier avec affichage progression et ETA.
    - `mapfile -d ''` remplace `FILES=($(find ...))` — gestion correcte des noms avec espaces.
    - `printf "\r%*s\r"` efface proprement la ligne de progression avant le message final.
  - `df` retiré des dépendances.
- `README.md` — dépendances mises à jour (`df` supprimé, `stat` et `du` ajoutés).
- `docs/manuel.md`
  - Section `detect_parallelism` supprimée.
  - Section `compute` réécrite autour de `compute_with_progress`.
  - Section performances : stratégie SSD/NVMe retirée, focus HDD séquentiel.
- `docs/progression-eta.md` — implémentation finale documentée ; note `mapfile -d ''` vs substitution de commande.
- `tests/run_tests.sh` — T11 ajouté : vérifie que la base produite par `compute_with_progress` est bit-à-bit identique à une base de référence, sans artefact ETA ni `\r`.
- `docs/explication-run-tests.md` — comptage corrigé (10 → 11 cas) ; section T11 ajoutée.

### Corrigé
- `tests/run_tests.sh` T10 : pattern `"^/"` remplacé par `"  /"` — `grep` opère sur une chaîne, pas un fichier, l'ancre `^` ne matchait pas la deuxième colonne.

---

## [0.1] — Structure initiale du projet

### Ajouté
- `integrity.sh` — script principal BLAKE3 avec trois modes : `compute`, `verify`, `compare`.
  - `set -euo pipefail` — mode strict.
  - `detect_parallelism()` — détection SSD/HDD via `/sys/block/.../queue/rotational`.
  - Mode `compute` : pipeline `find | sort -z | xargs b3sum`, parallélisme `-P 4` sur SSD.
  - Mode `verify` : délègue à `b3sum --check`.
  - Mode `compare` : tri sur colonne 2, `join` pour les modifiés, `comm` pour disparus/nouveaux, rapport `tee`.
- `README.md` — point d'entrée : dépendances, usage en 3 commandes, arbre de décision, règles critiques.
- `docs/manuel.md` — référence technique complète : algorithmes, structure `.b3`, workflow, explication du script, performances, limites, référence rapide, annexe FIM.
- `docs/progression-eta.md` — analyse du problème ETA sur pipeline `xargs`, deux approches (`pv` invalide, boucle bash), mécanique de l'estimation, tableau de comparaison des performances.
- `docs/explication-run-tests.md` — documentation du code `run_tests.sh` : chemins, compteurs, assertions, setup/teardown, structure d'un cas de test, prérequis, exit code CI.
- `tests/run_tests.sh` — suite de tests automatisée bash pur, 11 cas T01–T11, isolation via `mktemp`, teardown systématique, exit code CI-compatible.
- `tests/validation.md` — protocole de test manuel : 10 cas T01–T10 avec commandes exactes et résultats attendus, critères de qualité globaux.

--- Fichier : README.md ---
# integrity.sh — Vérification d'intégrité BLAKE3

Détection de corruption silencieuse et d'erreurs de transfert sur disque, par hachage BLAKE3.

**Dépendances :** `b3sum`, `bash >= 4`, `find`, `sort`, `awk`, `comm`, `join`, `stat`, `du`

---

## Usage

```bash
# Créer une base de hachage pour un dossier
./integrity.sh compute ./mon_dossier hashes_2024-01-15.b3

# Vérifier l'intégrité — lancer depuis le répertoire où le compute a été fait
./integrity.sh verify hashes_2024-01-15.b3

# Idem depuis un répertoire différent — passer le répertoire de travail d'origine
# Exemple : le compute a été lancé depuis /data, on est ailleurs
./integrity.sh verify /data/hashes_2024-01-15.b3 /data

# Comparer deux bases (états historiques) → résultats dans $RESULTATS_DIR/
./integrity.sh compare hashes_2024-01-15.b3 hashes_2024-02-01.b3

# Mode silencieux pour CI/cron — écrit uniquement dans les fichiers de résultats
./integrity.sh --quiet verify hashes_2024-01-15.b3
```

---

## Mode `--quiet`

Supprime toute sortie terminal (stdout/stderr) et écrit uniquement dans les fichiers de résultats (`recap.txt`, `failed.txt`). L'exit code est propagé : 0 si OK, non-nul en cas d'échec.

**Usage typique en CI/cron :**

```bash
# Hook pre-commit git
./integrity.sh --quiet verify base.b3 || { echo "Corruption détectée"; exit 1; }

# Monitoring cron
0 3 * * * /opt/integrity.sh --quiet verify /data/base.b3 || mail -s "ALERT" admin@example.com
```

Compatible avec `compute`, `verify`, et `compare`.

---

## Configuration

`RESULTATS_DIR` dans `integrity.sh` définit où sont créés les dossiers de résultats (valeur par défaut : `~/integrity_resultats`).

```bash
# Modifier dans integrity.sh, ligne RESULTATS_DIR=
RESULTATS_DIR="/mon/chemin/resultats"
```

Chaque exécution de `verify` ou `compare` crée un sous-dossier horodaté si le dossier existe déjà (pas d'écrasement silencieux) :

```
~/integrity_resultats/
├── resultats_hashes_2024-01-15/
│   ├── recap.txt       ← commande, date, compteurs
│   ├── failed.txt      ← fichiers en échec (verify)
│   ├── modifies.b3     ← fichiers dont le hash a changé (compare)
│   ├── disparus.txt    ← fichiers dans A absents de B (compare)
│   └── nouveaux.txt    ← fichiers dans B absents de A (compare)
└── resultats_hashes_2024-01-15_20250215-143022/  ← horodatage si collision
    └── ...
```

---

| Situation | Commande |
|---|---|
| Première indexation | `compute` |
| Vérifier après transfert / stockage | `verify` |
| Comparer deux snapshots | `compare` |
| Contrôle ad hoc d'un fichier unique | `b3sum fichier.bin` |
| Intégration CI/cron | `--quiet verify` |

---

## Structure du projet

```
integrity/
├── README.md              ← ce fichier
├── integrity.sh           ← script principal
├── docs/
│   ├── manuel.md          ← référence technique complète
│   └── progression-eta.md ← progression temps réel et estimation ETA
└── tests/
    ├── run_tests.sh       ← suite de tests automatisée
    └── validation.md      ← protocole de test et critères qualité
```

---

## Règles d'utilisation critiques

- Toujours utiliser des **chemins relatifs** (`find ./dossier`, jamais `/chemin/absolu`). Un chemin absolu rend la base inutilisable après déplacement ou remontage.
- Lancer `verify` depuis le **même répertoire de travail** qu'au moment du `compute`. Si ce n'est pas possible, passer ce répertoire en second argument : `verify hashes.b3 /chemin/origine` — c'est le répertoire d'où le compute a été lancé, **pas** le dossier qui a été haché.
- Stocker la base `.b3` sur un **support distinct** des données à vérifier.
- Nommer les bases avec une **date explicite** : `hashes_2024-01-15.b3`, jamais `hashes_latest.b3`.

---

## Tests

```bash
# Exécuter la suite de tests automatisée (bash >= 4, b3sum requis)
cd tests
./run_tests.sh

# Avec ShellCheck (recommandé)
apt install shellcheck
./run_tests.sh
```

14 cas de test couvrent : compute, verify, compare, noms avec espaces, chemins absolus vs relatifs, mode `--quiet`, horodatage des résultats, robustesse des assertions.

--- Fichier : TODO.md ---


J'ai ajouté des modifications au code, après avoir demandé à Claude les améliorations à apporter. 
Cependant il m'a pas donné les .md à jour. 
Il faut encore lui demander 
- manuel.md , changelog.md et readme.md 

tester, nopttament le flag --quiet  !!

puis commit 


--- Fichier : hash_1.b3 ---
3de7652fb73e4dbe9a6555ba09730acc2e9daaacc1fda7155bedd6c7c9518be6  /media/veracrypt1/partition_laptop/a ranger/2025-08-26 -- green card/2025 -- calcul green card.ods
400e50a0c29d6f739fa6531fc2b2b366b691fa7421e44f7489a7118df0ae1ee1  /media/veracrypt1/partition_laptop/a ranger/2025-08-26 -- green card/2025 -- calcul green card.txt
2f8773ddf9208753af952ab167031db2e3ba6634f68ed7bd76bca10ba5dcdbcb  /media/veracrypt1/partition_laptop/a ranger/2025-08-26 -- green card/2025 -- green card.txt
646752e2cfc37487cb9d1db3de0f26cf20d54875cb3221185bee7cae23b78d02  /media/veracrypt1/partition_laptop/a ranger/2025-08-26 -- green card/2025 -- llm -- livres green card loterie.md
4b7822bd902d4ec5d15fa73ac6d233d3651ec38b59ca233b443012c5782f9cc1  /media/veracrypt1/partition_laptop/a ranger/2025-10-26 -- note -- la patience.txt
148ecbfab4f88bc6b63cdc2d6a68e6e397fb22fcb860387a1611f67c81aad2f5  /media/veracrypt1/partition_laptop/a ranger/2025-11-02 -- jeff bezos invent and think long term.mkv
ba864626030b885bebb8e3ad80c0e7b4e848bd60dd75a03273a98519397a7917  /media/veracrypt1/partition_laptop/a ranger/2025-11-05 -- twitter -- francois chollet -- difference philosophie et ingenierie.png
a8be7c3e5767db14e1fc457995ff6bbb1b2cc73014f957423908745e501421de  /media/veracrypt1/partition_laptop/a ranger/2025-11-14 -- wikipedia -- thesaurisation.pdf
69020dd1faaffa27df56f08e086690528dc9709818224d5d0cc003846ecf842e  /media/veracrypt1/partition_laptop/a ranger/2025-11-20 -- enfance/2025-11-20 -- 2025-11-20 -- nan -- nan.png
d980992c894fd421f3157ca1f775de092469938527991fe2de7022ab42f6c3f3  /media/veracrypt1/partition_laptop/a ranger/2025-11-20 -- enfance/2025-11-20 -- 2025-11-20 -- packard bell logo 1990.svg.png
d85dcd32d9a6ffff910dd036190540ce58783f06ef83f5ec585d85da34d7e2b2  /media/veracrypt1/partition_laptop/a ranger/2025-12-23 -- note -- nul et bosse pas.txt
a6b2a7f6b0111e2a45fa04e4cb38d1ed7f33bc6c47d1557e7e52de7f2d982df9  /media/veracrypt1/partition_laptop/a ranger/2025-12-23 -- twitter -- dokpepper -- multi pass porte.pdf
dad1ecfa24916df9df413144c2ba05c91e1270067eaea36f2813fa6e7eef2838  /media/veracrypt1/partition_laptop/a ranger/2025-12-26 -- note -- audit perso.txt
14064216907d7a22cb70c63aaa93774a4144b1882760ed346ed8608ec55a0926  /media/veracrypt1/partition_laptop/a ranger/2025-12-27 -- note -- perte de sens.txt
a3e4875af51b8e62479c931a83fa026a9e7a7272e672177a629ff119727f8eab  /media/veracrypt1/partition_laptop/a ranger/2025-12-29 -- chaufage methode economie.pdf
c6386d44e88ec60a0c21087af31f8c0f19a4f42e8276602dd19b635a8e7298fe  /media/veracrypt1/partition_laptop/a ranger/2025-12-31 -- etudes - cours de maths a archiver/2025-12-23 -- 2025-12-23 -- calcul differentiel -- andre avez.pdf
08b1ca735e67688faa2f3080ed980d5e5bd09839cdad2900037b1fa50149c54c  /media/veracrypt1/partition_laptop/a ranger/2025-12-31 -- etudes - cours de maths a archiver/2025-12-23 -- 2025-12-23 -- cours de mathematiques 2.jpg
c73562680eeae42f0d8620c3af95346b06b2cf2fbebe7ada15d0aa1b2b040258  /media/veracrypt1/partition_laptop/a ranger/2025-12-31 -- etudes - cours de maths a archiver/2025-12-23 -- 2025-12-23 -- cours de mathematiques (2).jpg
5cab9d7df06a0f6e1c29ef4cb7aeed7f4e6e6ed0eee1d46677fcdf08200b2cb7  /media/veracrypt1/partition_laptop/a ranger/2025-12-31 -- etudes - cours de maths a archiver/2025-12-23 -- 2025-12-23 -- cours de mathematiques.jpg
535127536ee3f3f42774472cb94564f7e070e259c03945dbf25d9e84297a84d2  /media/veracrypt1/partition_laptop/a ranger/2025-12-31 -- etudes - cours de maths a archiver/2025-12-23 -- 2025-12-23 -- cours de mathematiques.webp
c807937075d8d0a64c2670ae03ceaf99b07fddc542d519ef7eb90b6e5f868ef1  /media/veracrypt1/partition_laptop/a ranger/2026-01-00 -- France - morale et valeurs/2026-02-02 -- llm -- religions avant les monothéismes.md
019ef2905a32dca906c0cee932003067012da1cc8d564659617c5ec41cb79166  /media/veracrypt1/partition_laptop/a ranger/2026-01-00 -- France - morale et valeurs/g bjymuxcaa-jpd.jfif
16fc9b46649ad4c5000628e2a570329ca463720cc9ad382c913498f90a78c8c8  /media/veracrypt1/partition_laptop/a ranger/2026-01-00 -- style vestimentaire/llm -- alternatives moins chères au style barbour.md
dd20de22129f518ac10828949be676e2b07b138729473024a70ce04fc8914340  /media/veracrypt1/partition_laptop/a ranger/2026-01-00 -- style vestimentaire/vetements fermier barbour.pdf
990f81549e4f6313471b16b0f15db23927ea878cac873c387dcc850c8854c75b  /media/veracrypt1/partition_laptop/a ranger/2026-01-01 -- note -- mercure danger.txt
dd41f084d9382e3eb00af26aec4d58ae82bea0baaeff5c07987b18ed6156d4f9  /media/veracrypt1/partition_laptop/a ranger/2026-01-04 -- note -- adresse coralie - trajet récupération voiture et séjour pays basque.txt
7f2147f4b013aa0aa0e741531188beb9793206de31f6779ab3f096fb057db01b  /media/veracrypt1/partition_laptop/a ranger/2026-01-04 -- note -- créer de faux profils.txt
6bc781ec2f9d710a3b833cd367c553fdaec8cb45755c0fba88956aca19c7ec35  /media/veracrypt1/partition_laptop/a ranger/2026-01-04 -- note -- todo -- test vih.txt
889311789f43557390bada161baa3d310914ff5723ed6680610286419f256ba7  /media/veracrypt1/partition_laptop/a ranger/2026-01-05 -- note -- adresses email à faire.txt
57d97d8176ded8c27216e15c73d39304ebf997870daabba44569e20f9fac0aa4  /media/veracrypt1/partition_laptop/a ranger/2026-01-08 -- note -- courroie de distribution.txt
dd0ee5b7886402d956683637826e1b54671bebe4bdddb5f2a0b3a32bacc4a7c7  /media/veracrypt1/partition_laptop/a ranger/2026-01-09 -- note -- 2026 projets.txt
9423abac9c08f00dbb220d37a8f9c9be41baeaa709b66264fcce803bafb9a06a  /media/veracrypt1/partition_laptop/a ranger/2026-01-14 -- note -- note voiture.txt
679f3a384e6cfda26aa73b92de71e58d694068e5c10249727a4995e8bf64b955  /media/veracrypt1/partition_laptop/a ranger/2026-01-17 -- note -- démarches admin.txt
d801c90937a7910f60c9aaafaa0f7eef166fcda624901531c1f49196d517f7ff  /media/veracrypt1/partition_laptop/a ranger/2026-01-20 -- note -- à faire.txt
ee174290fa4eb7943dcc1326b865f92dc9def3826daa64b8bdbc6e1a39050ee4  /media/veracrypt1/partition_laptop/a ranger/2026-01-21 -- note -- à modifier.txt
da06ddfa1fd6fbb74c85435663f6e9c6b8fc9bb337c937f384fc3750e1fba09a  /media/veracrypt1/partition_laptop/a ranger/2026-01-21 -- note -- election municipales.txt
27f0e6603d7698e266178b1abacd4d6b7f80f3a5c687705484faa9855ff629dd  /media/veracrypt1/partition_laptop/a ranger/2026-01-21 -- note -- espoir de changement.txt
ce7763cc61376c46ea4c7c97997894576b05ee6331a399fb8a5462735dc42820  /media/veracrypt1/partition_laptop/a ranger/2026-01-21 -- note -- ne pas devenir fou.txt
ce98437926c4cfb8050b329eaa855ee8066d72420ed7f5db1eaad3cce518ee91  /media/veracrypt1/partition_laptop/a ranger/2026-01-21 -- note -- todo -- les mails de moreno rsa.txt
3ac9778e2c88130820e5252621cce4010e2cb281c41bf20ad4082ed8a67709fb  /media/veracrypt1/partition_laptop/a ranger/2026-01-26 -- note -- changer assurance.txt
d57b79a8eb7a5c3cc7cd3e12523b666904c5124c7780596553e90bcff7204aa7  /media/veracrypt1/partition_laptop/a ranger/2026-01-28 -- note -- nqt suivi.txt
47ca309391159a6756a7647cbc0a1708b3672f2267a9d5e11fde87b203b2962f  /media/veracrypt1/partition_laptop/a ranger/2026-01-28 -- note -- todo maison.txt
06d6f2b939c3cad74bb00f0af66439f72d9595bb684e28267a98cdf1ca46bee8  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- liens_symboliques_bureau/documentation/ChatGPT-Création de liens symboliques.md
ec89bd4319943cd1d13df1a1fde217c533dfe928fc27623f00f433fa31da92ad  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- liens_symboliques_bureau/documentation/ChatGPT-Problème icônes et liens.md
437488efd6b0d3a36179808ea2e58ac8bb0be3a17930f21ebc4e1fdabf302765  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- liens_symboliques_bureau/documentation/ChatGPT-Problème script Bash.md
59eb5f67307877319e9a9fe1eb218e347c6598a29a9e20afe2b8a201db5a9d13  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- liens_symboliques_bureau/icons/icon_blue_star.png
273b951528979f04007b3332e3815b3b10f8d399298a3378e8f7b445438866df  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- liens_symboliques_bureau/icons/icon_free_file_sync.png
5e7346347cf59227ca8160b7c1a46d116a83c4800589340aa87377ce922a4077  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- liens_symboliques_bureau/liens.csv
bdc6e97ca44eff6910121e6a21679297a3b6ea9c4f0e3838c5def4c933ef5ec3  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- liens_symboliques_bureau/liens.ods
af1349b9f5f9a1a6a0404dea36dcc9499bcb25c9adc112b7cc9a93cae41f3262  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- liens_symboliques_bureau/README.md
137e9ceef8763633ce1badccff10e1eae1b7de3dcd3e199582518ef93154fbb2  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- liens_symboliques_bureau/script.sh
04e10e0705426d4f13c21dab233b1f666df31f32e60091d47bc211d86146a489  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- ReIcon/iconlayoutsforcm.ini
2658eb2f6a9a326fb83f0ca41cc2c168a8464fbb14a8d4b5f64f3947180af313  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- ReIcon/reicon.exe
cb93693c6906e54a28c7bc7dc210b95424b4782d79516ad5582868222af9dffc  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- ReIcon/reicon.ini
a65abadb7afc2d3b02db6fc9c82ddd422659d6a6d894155c17948b3fd7b97f6c  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- ReIcon/reicon_x64.exe
f23d1183986012e68747908d41a45667f6c87ab7f4af730d167bd9f93221ce86  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- ReIcon/version_info.txt
72a3ab9ec68d078909dc096d77c0a436cd8d558d737ad66ace0aeb8082364291  /media/veracrypt1/partition_laptop/a ranger/2026-02-06 -- la cité des taupes -- dlq/2026-02-06 -- la cité des taupes -- dlq.jfif
d1b4afe035559de64329d77153f42b4b4567972d110d99c1c7dd716c98114b42  /media/veracrypt1/partition_laptop/a ranger/2026-02-06 -- la cité des taupes -- dlq/2026-02-06 -- la cité des taupes -- dlq.pdf
391576b330f224f476ac84c93e16d0a6cf37bc2090d2cb8e4102bee1aa63d163  /media/veracrypt1/partition_laptop/a ranger/2026-02-06 -- la cité des taupes -- dlq/dox la cité des taupes.txt
4d3397ee5c0339a5540a0fbaa3fd09802ea7bda76e3896da0e73208487477688  /media/veracrypt1/partition_laptop/a ranger/2026-02-10 -- 10-02-2026 -- llm -- valorisation des stages sur le marché du travail.md
bcd492dfd24662fc5533be695472423fa78018aa0d9c77374d9a851e7ffaef2b  /media/veracrypt1/partition_laptop/a ranger/2026-02-10 -- 10-02-2026 -- todo claude.txt
8180fc85d789dd5b07435cfd9270efe5db97030b8dd86c26e223911c6ccccd95  /media/veracrypt1/partition_laptop/a ranger/2026-02-10 -- 10-02-2026 -- voiture -- radar.png
786f2ab3dd38d82f82320cbbd75a164143333e5de0c0b639789e2fbbe676059c  /media/veracrypt1/partition_laptop/a ranger/2026-02-11 -- 11-02-2026 -- llm -- kant maîtrise et responsabilité de soi.md
d0edc708fcd16332562e8fe37414a2a9466cd2fdf0d3e6ab4d9358b2f643c420  /media/veracrypt1/partition_laptop/a ranger/2026-02-11 -- 11-02-2026 -- llm -- perception travail sexe classes sociales v1.md
c530a4626f44f3eb3590a5e176ff173ef77104d0850ef66e4f308379cdf5e2f8  /media/veracrypt1/partition_laptop/a ranger/2026-02-11 -- 11-02-2026 -- llm -- perception travail sexe classes sociales v2.md
f48bc09d0ca36fe7591ac65be60b8239dafa25bebd0757d13e70f250a9a09c84  /media/veracrypt1/partition_laptop/a ranger/2026-02-14 -- 14-02-2026 -- twitter -- pasvrmntpierre -- nan.pdf
c377f6ff2c2efd422c3606c328eb058bf348b1fef7b5a69d71e8dd9c65087f02  /media/veracrypt1/partition_laptop/a ranger/2026-02-16 -- 16-02-2026 -- maman
29303459a1d3d47a23a91e0a1a7d1fcf253da99842cbfbfc883f96a46eb0a733  /media/veracrypt1/partition_laptop/a ranger/2026-02-17 -- gestion des risques cassos emploi
d580c94a44f30e1d1933d428f080c1e1cd01ca86120635439f5a3cb9cc5d2634  /media/veracrypt1/partition_laptop/a ranger/2026-02-18 -- llm -- Afficher fichiers cachés Nautilus (1).md
da4b9648703684b1f9c996f71cf87867822ffd6ae69621e611b9a2c1d5c2a0e1  /media/veracrypt1/partition_laptop/a ranger/2026-02-18 -- llm -- Principes actifs prouvés.md
6a0e40f80e8b9959334f0977cfc05e5d46490dc283b58f764995102d57bfd6cf  /media/veracrypt1/partition_laptop/a ranger/2026-02-19 -- llm -- Holding patrimoniale et SCI.md
3134c0fa479b065cfc1efaddeee0a58fe6612d2a79e713f267ffe5589fc01fb3  /media/veracrypt1/partition_laptop/a ranger/2026-02-19 -- llm -- Redémarrer logiciel Linux.md
d186e33ff58dcc4f8cbf2ae2f2cc041a91b33819b6aef245f401c726f4c8195a  /media/veracrypt1/partition_laptop/a ranger/2026-02-19 -- twitter -- AnttonRouget -- nan.pdf
32d080b92a3c068660dc23d8b1e84252fa48f2af8a4f223817ef3114cc8a76ad  /media/veracrypt1/partition_laptop/a ranger/2026-02-19 -- twitter -- bluetouff -- nan.pdf
ecca58a96d0e5445917859bd1cc27ec3ca94950eadd6184886a35aeb4e307b6f  /media/veracrypt1/partition_laptop/a ranger/2026-02-20 -- cours anglais claude/English_101_Cours_Complet.docx
b45e3c87faea3d48f665b572e5f59fb979f90f0529867a284faac4ebba200f38  /media/veracrypt1/partition_laptop/a ranger/2026-02-20 -- cours anglais claude/English_101_Cours_Complet.pdf
e4d8189c79cac73c4188515242fd46297dd4a4917b0827c288f1a4971fe2bb75  /media/veracrypt1/partition_laptop/a ranger/2026-02-20 -- cours anglais claude/English_102_Cours_Complet.docx
a339470f2202220751c95b5698476eeda99803014fb5c16b63b99c1749da1ef5  /media/veracrypt1/partition_laptop/a ranger/2026-02-20 -- cours anglais claude/English_102_Cours_Complet.pdf
e960911762a6466c5146235afc89f6d375732eecfc1afedc956d1e310c0ae8fb  /media/veracrypt1/partition_laptop/a ranger/2026-02-20 -- cours anglais claude/English_103_Cours_Complet.docx
80b6fcda1e53a459c25d1911082b167318ec32e0a732c5f044dad3d95850b760  /media/veracrypt1/partition_laptop/a ranger/2026-02-20 -- cours anglais claude/English_103_Cours_Complet.pdf
c3bf9db6367548d1a1476d859c01bcdbe73db227d8d5a7a1f25d05c52d1b6a3b  /media/veracrypt1/partition_laptop/a ranger/2026-02-20 -- cours anglais claude/English_104_Cours_Complet.docx
ec5f0d1a42b5bbd73656b3c3eec967bcdc28b458c544ef66fa52695fdc8aadb2  /media/veracrypt1/partition_laptop/a ranger/2026-02-20 -- cours anglais claude/English_105_Cours_Complet.docx
fdd3a783567e19f14857640c34e136e5152ac5d1cc4b6cbf9b74516100bd280f  /media/veracrypt1/partition_laptop/a ranger/!administratif/2026-01-21 -- date des impots.txt
667ac19664cbfdcd2a2489d2f928ca9e37709467144ced0b4fe2a90fd0c336e2  /media/veracrypt1/partition_laptop/a ranger/!administratif/raccourci -- !a ranger.lnk
2ffcd28d0c0e38d9680dbfbac8ff94af47676e375719c8392bc464b7a5487802  /media/veracrypt1/partition_laptop/a ranger/!bureau aménagement intérieur/2025-10-29 -- bureau amenagement interieur 1.png
31acaaeea69f3a58c32f2e5beb94b0582e9a2346299a3beb82aa009edab8e165  /media/veracrypt1/partition_laptop/a ranger/!bureau aménagement intérieur/2025-10-29 -- bureau amenagement interieur 2.png
6557a23716ca5edbf7fa72b10aca7350c2335a5a9c7b23b5094f788ac8c39234  /media/veracrypt1/partition_laptop/a ranger/!bureau aménagement intérieur/2025-10-29 -- bureau amenagement interieur 3.png
276e82bb73e6b10abd6ab9f6ea541c54bf598ef888f228e5cde2b1a604736159  /media/veracrypt1/partition_laptop/a ranger/!bureau aménagement intérieur/llm -- l'histoire des lampes waldmann.md
c55f00fdf7576beb4c11fd9b80a480c09d0a5e1154fcdac90e1fa7b6da748372  /media/veracrypt1/partition_laptop/a ranger/!bureau/test mst.txt
100b181024b91bfc5d6d828bd0fa52adb6ccd2804c738a64e7541725ba78448b  /media/veracrypt1/partition_laptop/a ranger/!bureau/todo.txt
52fce69387f6eadb601f4ae71d56958430ae878908238a0c519ce0b06c217a87  /media/veracrypt1/partition_laptop/a ranger/!bureau/vitamines.txt
2dd09ad2011221e41ae46346f4e77790b8867876b0cb9409ee2197b6f52367a8  /media/veracrypt1/partition_laptop/a ranger/!config ordi et code/futur plateforme post ia/2026-02-14 -- 14-02-2026 -- j cloud et j wiki
cedc09e3803553f45df439ee7db06eb6a3108bf0e4e512acabda18a1780adc07  /media/veracrypt1/partition_laptop/a ranger/!config ordi et code/futur plateforme post ia/2026-02-14 -- 14-02-2026 -- plateformes ia pour données personnelles.odt
a924472c9d009b8287e7d9b429fe68fd5ba8285081823d2d2cd1992d98eb206b  /media/veracrypt1/partition_laptop/a ranger/!config ordi et code/futur plateforme post ia/2026-02-16 -- llm -- Langage et interfaces numériques (1).md
f934b328e1395f02d555d9542f090de0f761440bca18d93504d24bbc72540b08  /media/veracrypt1/partition_laptop/a ranger/!cuisine/2025-11-30 -- note -- cuisson pates.txt
0c3e855339bbec24f26ceef618b77bb8097d9472f9e333c64428d64083eb2d1d  /media/veracrypt1/partition_laptop/a ranger/!emploi/10-02-2026 -- cnam.txt
af40ddfcb5114cb86096bbe83b0b6131fca8b8c8d45237fda1cca1a5e09c15f9  /media/veracrypt1/partition_laptop/a ranger/!emploi/10-02-2026 -- llm -- financement formation cnam.md
a76db2a72bda817647bc16b86066a107c14b3de678609e7e3c7260d3b7f1888b  /media/veracrypt1/partition_laptop/a ranger/!emploi/11-02-2026 -- twitter -- tanguylacr0ix -- ghost job - réalité honnête.pdf
c179c9463f32d7c0160856e7a80d4fa8f841a1805cb4c6e8e45bb77800b48942  /media/veracrypt1/partition_laptop/a ranger/!emploi/2026-02-03 -- llm -- qui est responsable de quoi.md
84c97504d07df7d57f1881ab6684b991255928859023fc651bd3f63102a0d2a1  /media/veracrypt1/partition_laptop/a ranger/!emploi/2026-02-08 -- twitter -- energieduvide -- nan.pdf
98e15bdbc4c2aeb080c39bd5aad63e4214b59d76727bea576e98cdbc9b0f7ed1  /media/veracrypt1/partition_laptop/a ranger/!emploi/NQT/mail de bienvenu et info.pdf
f65348224478a20e09b72a304467ca2259ae77ff4c05103d6b27ab816f14ed10  /media/veracrypt1/partition_laptop/a ranger/!emploi/raccourci -- !a ranger.lnk
c1968f9a00ed33bf888574d897120dbf3b8c6c8b7e7a966ec42fe30039c6d561  /media/veracrypt1/partition_laptop/a ranger/!etudes/2026-01-19 -- le cube révélations sur les dérives de lenseignement supérieur privé -- claire marchal.epub
c0cd70c9e441852a9dd86ac9046b04267a8c58bdf53471f6c5eda72ef1ab4a2a  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- autre/2026-01-02 -- twitter -- lukas ekwueme -- gain travailler plus , plateau - allemagne.pdf
5fc5718ed4f5cb6b10b241dae288f131fb3abab730723643025e95b2fef5c72b  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- autre/2026-01-20 -- llm -- contrat de capitalisation fonctionnement et transmission.md
18e8dad8ea5c42aa645c75035e19e2384e6dfc6ae01bf302622aeb8aaa768ac9  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- autre/2026-01-21 -- llm -- imposition revenus de l'étranger.md
86fc9d1e9da6bda40b142085b1da983637c12b68bd71386c495bb5ca7f278537  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- autre/2026-01-21 -- twitter -- bayesreality - gain marginal du travail en france.pdf
bc775d811e2a466318303c754ac8cb63ba6ad965cde5a4038bc7772b285181ad  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- autre/2026-01-21 -- twitter -- kerguennecp - utilisation des llm anti pièges.pdf
f3a8a15aa4fc5cf3956950a8475d06166356ae08f26845b8da20e600a0d27e32  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- autre/2026-01-23 -- twitter -- boringbiz - immobilier politique économique.pdf
3ff22993ebdf17a68e33bc7ae014338c2d3a4cf36af9c85b1b69b5f25b7e470d  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- autre/2026-01-30 -- twitter -- tradeform -- a reflechir.pdf
fa7fd4b3c52d9bf0f3cdb4a7e95833192253c8b8808057d030bc3e5286a4460d  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- autre/2026-02-03 -- twitter -- cortisquared -- explication conséquence austérité.pdf
bc17436ce6009b73b9021f2356543bbd87769a722fab648d5c1be343d8ced762  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- autre/2026-02-06 -- différence niveau de vie retraite actif.png
4a52c06fb7e4e3574bd903bd119ec8df32c7b0a62b25dec6490c880f4241f576  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- autre/raccourci -- !a ranger - politique economique.lnk
e91a5f115890208ea7ad102354931692255314a18a561200124761152bfad2da  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- invest/08-02-2026 --  danger squat immobilier.png
11427c5119666656d59ab4f6d3ce3469f9b9d2c39bf2212b7065040423b990a9  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- invest/14-02-2026 -- asset breakdown by wealth level.jpeg
2c945df5457a8cf3ffe3ab23ebc705cf2e25d526cdccab17336609e8837e20ab  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- invest/14-02-2026 -- scf23.pdf
47056278813c4b39902d02e613d0b232052c681c9af2f785a070decb5985442e  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- invest/2026-01-30 -- 100331-brinson determinants portfolio performance.pdf
e08b8b904bdae9457e91e9115f3de4a748b8c203aa6d57db2face739e7e412d6  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- invest/2026-02-01 -- minimum veilliesse retraite.jfif
d1486b50cffc92041890cc4b0af99b4b726c894551de4031f956a1ee885b5fe9  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- invest/capture d’écran 2026-02-10 190008.png
515e40a5ce54231709b7c83c4bade55db86120492358cf66d9b5c835ca5e5f96  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- invest/raccourci -- !a ranger - invest.lnk
907fdf51e9520465ac3dd7349b5dd782728acb602fca8a1d67691a17d4cd85a6  /media/veracrypt1/partition_laptop/a ranger/!methode/2025-12-31 -- llm -- lois de puissance et pareto.md
3be9a70905415cd6619c50575ea3545e1e13b2caef802254040353e01d01f07f  /media/veracrypt1/partition_laptop/a ranger/!methode/2026-01-05 -- probable doublon -- 2026-01-01 -- llm -- unknown unknown.md
5115980df5d067184eb641dbf134afd7c8964ca93f094309476890405cb3f1fa  /media/veracrypt1/partition_laptop/a ranger/!methode/2026-01-24 -- méthode rédaction de documentation technique.txt
862ea856bbd2873d5bb72a7026cfcbda5a7b0fa6aaaaaca20e7de718b4f8d408  /media/veracrypt1/partition_laptop/a ranger/!methode/2026-01-27 -- llm -- réponse sans documents externes (2).md
55c21961428cb882cc488ddcb906883b28f8226beef90dc5099622d9602ce673  /media/veracrypt1/partition_laptop/a ranger/!methode/2026-01-27 -- méthode -- vue intra fichier ou intra dossier.txt
24b88ded84b91877bc4cb6b1f865b37ad32241501eae6df964e9ab9dfd6a9016  /media/veracrypt1/partition_laptop/a ranger/!methode/2026-02-03 -- llm -- trouver des modèles excel professionnels.md
e90952c61460544580275344fc4ea8e70b27248c1624a057d80f11323f5bc54c  /media/veracrypt1/partition_laptop/a ranger/!methode/2026-02-04 -- llm -- trouver des modèles excel professionnels.md
35f25d5af77c6d0bee2d16b55f1b93cf30469966e449ff5bb7c9892d23ff2d00  /media/veracrypt1/partition_laptop/a ranger/!methode/2026-02-07 -- llm -- programme de formation en résolution de problèmes (1).md
6e942e7e238acf92e09f9ddc7275207ab67f0c318218f95e98919c1bbeabd296  /media/veracrypt1/partition_laptop/a ranger/!methode/2026-02-07 -- llm -- sommaire du cours - critical thinking 101.md
01d1db4204c6f8c3adcddc6d384dba62cb2738c24485d76c8b0b8e5e1228b377  /media/veracrypt1/partition_laptop/a ranger/!methode/2026-02-07 -- llm -- sommaire du cours - decision making 101.md
ed922548073d1522c31ba0e533b5791cd36f6f42d92be4b2eb8ae1aaaff08830  /media/veracrypt1/partition_laptop/a ranger/!methode/2026-02-07 -- llm -- sommaire du cours - problem solving 101.md
01f3d8fdc8e31b4bb3f83d578a57556824d015616375420c7324b695389a5bb4  /media/veracrypt1/partition_laptop/a ranger/!methode/llm -- sommaire du cours truth-seeking 101.md
f82e126cab2c8a688c693a8c77ae84c62f9fa5251420806fbb138d1fd6c19809  /media/veracrypt1/partition_laptop/a ranger/!methode/raccourci -- !a ranger.lnk
9be0756aa1d2ec10c8a9aefd546153086ab8d534d0cb8eade14043eefef1ff6f  /media/veracrypt1/partition_laptop/a ranger/!musique/2026-01-17 -- open MPT tuto/2026-01-17 -- adresse samples.txt
d9d6795348e604e72da11ca4b496c3674f3502d9f35219865003220499382c78  /media/veracrypt1/partition_laptop/a ranger/!musique/2026-01-17 -- open MPT tuto/2026-01-17 -- llm -- premiers pas avec openmpt.md
bac1f4cb55d67135d2be02b40f6ae82757fca5a1c6e7c21677682737bcd39bb6  /media/veracrypt1/partition_laptop/a ranger/!musique/2026-01-17 -- open MPT tuto/2026-01-17 -- module2.bak
50677732c591a08a1968fea152e6cc16785f0ab4b48a3f9c6cc351a5a6cfc140  /media/veracrypt1/partition_laptop/a ranger/!musique/2026-01-17 -- open MPT tuto/2026-01-17 -- module2.it
936a972d1abf57343d0487fe9585c2fb5b9ae54be6d40c4eee6bb4113b547220  /media/veracrypt1/partition_laptop/a ranger/!musique/2026-01-17 -- open MPT tuto/2026-01-17 -- module2.wav
afd6ed8968fb6256dcf7c7cd04fdf1bac00a12ff78ef55ef8ece4952f26419b5  /media/veracrypt1/partition_laptop/a ranger/!musique/2026-01-17 -- open MPT tuto/2026-01-17 -- pas de son.txt
8813524c4e8fd78206dbf01c1348a6a943bec671ddcf63057bb08e813ad742ed  /media/veracrypt1/partition_laptop/a ranger/!musique/raccourci -- !a ranger.lnk
714d86766b49c2239a962c7e6a5b6ee49cf180284a6361a55a189870b9727df7  /media/veracrypt1/partition_laptop/a ranger/!news/2025-11-30 -- llm -- evolution de youtube.md
33a806a8d3988a0cccd1718d6ab43a2f41d3af8d228ac59edf955db05e6ff2de  /media/veracrypt1/partition_laptop/a ranger/!news/2025-12-17 -- reddit -- piege raig bait reseaux.png
724bf11a9ed571a1435586347401a72380af455bf62c4c65051902c77a44644e  /media/veracrypt1/partition_laptop/a ranger/!news/raccourci -- !a ranger.lnk
3edeb7686e5bf08aafabb8374632d996d02156cbd0d8141c6d1d0e6fac4f9033  /media/veracrypt1/partition_laptop/a ranger/!relationel/raccourci -- !a ranger.lnk
d6327fad6f5f245f57311f4d97f5fb5c4730168fcae80f770b671ff400629c44  /media/veracrypt1/partition_laptop/a ranger/!sante/10-02-2026 -- llm -- types de boutons cutanés (2).md
f12f8faa7a6aaa4a203f99d779547029d4af13dcd6532e76db9be9d9baaacdf2  /media/veracrypt1/partition_laptop/a ranger/!sante/13-02-2026 -- llm -- aspirations rectales possibles.md
7e097c5c8ae83ec76d86d1b4a905222c7073eb34b07bf850a775bc0ed183aa33  /media/veracrypt1/partition_laptop/a ranger/!sante/2026-01-05 -- probable doublon -- 2026-01-01 -- llm-coût réanimation en france.md
297c06106653c8a3a9d119f9acdb64056efd7e5cf15a5f503a781bf9eeba64a1  /media/veracrypt1/partition_laptop/a ranger/!sante/2026-01-05 -- probable doublon -- 2026-01-01 -- llm -- néo-assureurs l'assurance réinventée.md
494f553dc53da8933d3fe4e592df681026ea824b48dd881ecc97a4ad3cd293cb  /media/veracrypt1/partition_laptop/a ranger/!sante/2026-01-05 -- probable doublon -- 2026-01-01 -- llm -- santé mutuelle.md
dd6e9b9b23ae8e3bfd68c87978ea879708f2e825cf8cc6ce506fc6006a78f91a  /media/veracrypt1/partition_laptop/a ranger/!sante/raccourci -- !a ranger.lnk
dcf3ed4926e78e026bcc626374eef7a1600c4b0df22b03dd1a1bcdf566846647  /media/veracrypt1/partition_laptop/a ranger/!securite/2026-02-14 -- 14-02-2026 -- mort de quentin.pdf
5581009cba0babc976b4ffdf2af42d3820fbee43124e86fc700c4251f7445505  /media/veracrypt1/partition_laptop/a ranger/!securite/raccourci -- !a ranger.lnk
0962f63b8342bbabcd2fd2565389fbecffabf02325c5aa2d251d9b5f3d256d1a  /media/veracrypt1/partition_laptop/a ranger/!sensible/5Inayabeurrette profil 2 escorte/escort_annecy_inayabeurrette_98a9cc.jpg
2a6c98f23c44a5dce385fc629cb6d7760439882156b815a8c7efe220e4c5fd0d  /media/veracrypt1/partition_laptop/a ranger/!sensible/5Inayabeurrette profil 2 escorte/escort_toulouse_inayabeurrette_10c11d.jpg
b526f941211c446bf3503c52973303a55cc8e62e33fd2defdb6d356d6078eede  /media/veracrypt1/partition_laptop/a ranger/!sensible/5Inayabeurrette profil 2 escorte/escort_toulouse_inayabeurrette_3209bc.jpg
0977b8d2dbb8499100fb3fc108c268b8386baf8a9ffdd0f8447178cf5c026159  /media/veracrypt1/partition_laptop/a ranger/!sensible/5Inayabeurrette profil 2 escorte/escort_toulouse_inayabeurrette_7330ef.jpg
ba3acf0ae21fa6e690260311c9e5ad088352b95f1193704800e5b3d6b7da8ca3  /media/veracrypt1/partition_laptop/a ranger/!sensible/5Inayabeurrette profil 2 escorte/escort_toulouse_inayabeurrette_78938f.jpg
ddf7cb84bc619903ac1c947ccc5e9f01275a52f025a25ba1ff3a861d32d4f38e  /media/veracrypt1/partition_laptop/a ranger/!sensible/5Inayabeurrette profil 2 escorte/escort_toulouse_inayabeurrette_875ddf.jpg
b0a1b9438733103669d1a6f1884cabc3f7c51b0628a42d681b8f37e1eabeaace  /media/veracrypt1/partition_laptop/a ranger/!sensible/5Inayabeurrette profil 2 escorte/escort_toulouse_inayabeurrette_93f187.jpg
55455704b3bd07762b91447c0a8e1e8faca7655fa6c59c4980cd255eab732e38  /media/veracrypt1/partition_laptop/a ranger/!sensible/5Inayabeurrette profil 2 escorte/escort_toulouse_inayabeurrette_9ec9ca.jpg
53e296809a791a730cbe077c69ff47e9746e7ef08be33f8a4b99da3279ac1af2  /media/veracrypt1/partition_laptop/a ranger/!sensible/5Inayabeurrette profil 2 escorte/screencapture-sexemodel-escort-inayabeurrette-2291132-2026-02-11-02_17_12.pdf
8c732412b8e9534ff4c6cafb95cf115c7a0e512821f05e259806fe9ee9cf3383  /media/veracrypt1/partition_laptop/a ranger/!vie publique et politique/raccourci -- !a ranger.lnk
4e3800d45000f17e683b7d157739b186217417e7917563b72d8293d692e6c515  /media/veracrypt1/partition_laptop/a ranger/!voiture/raccourci -- !a ranger.lnk


--- Fichier : hash_2.b3 ---
3de7652fb73e4dbe9a6555ba09730acc2e9daaacc1fda7155bedd6c7c9518be6  /media/veracrypt1/partition_laptop/a ranger/2025-08-26 -- green card/2025 -- calcul green card.ods
400e50a0c29d6f739fa6531fc2b2b366b691fa7421e44f7489a7118df0ae1ee1  /media/veracrypt1/partition_laptop/a ranger/2025-08-26 -- green card/2025 -- calcul green card.txt
2f8773ddf9208753af952ab167031db2e3ba6634f68ed7bd76bca10ba5dcdbcb  /media/veracrypt1/partition_laptop/a ranger/2025-08-26 -- green card/2025 -- green card.txt
646752e2cfc37487cb9d1db3de0f26cf20d54875cb3221185bee7cae23b78d02  /media/veracrypt1/partition_laptop/a ranger/2025-08-26 -- green card/2025 -- llm -- livres green card loterie.md
4fb31f53bff948cd9a9b609970f094d1a34775ebe9fd39009f92236b2f9370f7  /media/veracrypt1/partition_laptop/a ranger/2025-10-26 -- note -- la patience.txt
148ecbfab4f88bc6b63cdc2d6a68e6e397fb22fcb860387a1611f67c81aad2f5  /media/veracrypt1/partition_laptop/a ranger/2025-11-02 -- jeff bezos invent and think long term.mkv
ba864626030b885bebb8e3ad80c0e7b4e848bd60dd75a03273a98519397a7917  /media/veracrypt1/partition_laptop/a ranger/2025-11-05 -- twitter -- francois chollet -- difference philosophie et ingenierie.png
a8be7c3e5767db14e1fc457995ff6bbb1b2cc73014f957423908745e501421de  /media/veracrypt1/partition_laptop/a ranger/2025-11-14 -- wikipedia -- thesaurisation.pdf
69020dd1faaffa27df56f08e086690528dc9709818224d5d0cc003846ecf842e  /media/veracrypt1/partition_laptop/a ranger/2025-11-20 -- enfance/2025-11-20 -- 2025-11-20 -- nan -- nan.png
d980992c894fd421f3157ca1f775de092469938527991fe2de7022ab42f6c3f3  /media/veracrypt1/partition_laptop/a ranger/2025-11-20 -- enfance/2025-11-20 -- 2025-11-20 -- packard bell logo 1990.svg.png
d85dcd32d9a6ffff910dd036190540ce58783f06ef83f5ec585d85da34d7e2b2  /media/veracrypt1/partition_laptop/a ranger/2025-12-23 -- note -- nul et bosse pas.txt
a6b2a7f6b0111e2a45fa04e4cb38d1ed7f33bc6c47d1557e7e52de7f2d982df9  /media/veracrypt1/partition_laptop/a ranger/2025-12-23 -- twitter -- dokpepper -- multi pass porte.pdf
dad1ecfa24916df9df413144c2ba05c91e1270067eaea36f2813fa6e7eef2838  /media/veracrypt1/partition_laptop/a ranger/2025-12-26 -- note -- audit perso.txt
14064216907d7a22cb70c63aaa93774a4144b1882760ed346ed8608ec55a0926  /media/veracrypt1/partition_laptop/a ranger/2025-12-27 -- note -- perte de sens.txt
a3e4875af51b8e62479c931a83fa026a9e7a7272e672177a629ff119727f8eab  /media/veracrypt1/partition_laptop/a ranger/2025-12-29 -- chaufage methode economie.pdf
c6386d44e88ec60a0c21087af31f8c0f19a4f42e8276602dd19b635a8e7298fe  /media/veracrypt1/partition_laptop/a ranger/2025-12-31 -- etudes - cours de maths a archiver/2025-12-23 -- 2025-12-23 -- calcul differentiel -- andre avez.pdf
08b1ca735e67688faa2f3080ed980d5e5bd09839cdad2900037b1fa50149c54c  /media/veracrypt1/partition_laptop/a ranger/2025-12-31 -- etudes - cours de maths a archiver/2025-12-23 -- 2025-12-23 -- cours de mathematiques 2.jpg
c73562680eeae42f0d8620c3af95346b06b2cf2fbebe7ada15d0aa1b2b040258  /media/veracrypt1/partition_laptop/a ranger/2025-12-31 -- etudes - cours de maths a archiver/2025-12-23 -- 2025-12-23 -- cours de mathematiques (2).jpg
5cab9d7df06a0f6e1c29ef4cb7aeed7f4e6e6ed0eee1d46677fcdf08200b2cb7  /media/veracrypt1/partition_laptop/a ranger/2025-12-31 -- etudes - cours de maths a archiver/2025-12-23 -- 2025-12-23 -- cours de mathematiques.jpg
535127536ee3f3f42774472cb94564f7e070e259c03945dbf25d9e84297a84d2  /media/veracrypt1/partition_laptop/a ranger/2025-12-31 -- etudes - cours de maths a archiver/2025-12-23 -- 2025-12-23 -- cours de mathematiques.webp
c807937075d8d0a64c2670ae03ceaf99b07fddc542d519ef7eb90b6e5f868ef1  /media/veracrypt1/partition_laptop/a ranger/2026-01-00 -- France - morale et valeurs/2026-02-02 -- llm -- religions avant les monothéismes.md
019ef2905a32dca906c0cee932003067012da1cc8d564659617c5ec41cb79166  /media/veracrypt1/partition_laptop/a ranger/2026-01-00 -- France - morale et valeurs/g bjymuxcaa-jpd.jfif
16fc9b46649ad4c5000628e2a570329ca463720cc9ad382c913498f90a78c8c8  /media/veracrypt1/partition_laptop/a ranger/2026-01-00 -- style vestimentaire/llm -- alternatives moins chères au style barbour.md
dd20de22129f518ac10828949be676e2b07b138729473024a70ce04fc8914340  /media/veracrypt1/partition_laptop/a ranger/2026-01-00 -- style vestimentaire/vetements fermier barbour.pdf
990f81549e4f6313471b16b0f15db23927ea878cac873c387dcc850c8854c75b  /media/veracrypt1/partition_laptop/a ranger/2026-01-01 -- note -- mercure danger.txt
dd41f084d9382e3eb00af26aec4d58ae82bea0baaeff5c07987b18ed6156d4f9  /media/veracrypt1/partition_laptop/a ranger/2026-01-04 -- note -- adresse coralie - trajet récupération voiture et séjour pays basque.txt
7f2147f4b013aa0aa0e741531188beb9793206de31f6779ab3f096fb057db01b  /media/veracrypt1/partition_laptop/a ranger/2026-01-04 -- note -- créer de faux profils.txt
6bc781ec2f9d710a3b833cd367c553fdaec8cb45755c0fba88956aca19c7ec35  /media/veracrypt1/partition_laptop/a ranger/2026-01-04 -- note -- todo -- test vih.txt
889311789f43557390bada161baa3d310914ff5723ed6680610286419f256ba7  /media/veracrypt1/partition_laptop/a ranger/2026-01-05 -- note -- adresses email à faire.txt
57d97d8176ded8c27216e15c73d39304ebf997870daabba44569e20f9fac0aa4  /media/veracrypt1/partition_laptop/a ranger/2026-01-08 -- note -- courroie de distribution.txt
dd0ee5b7886402d956683637826e1b54671bebe4bdddb5f2a0b3a32bacc4a7c7  /media/veracrypt1/partition_laptop/a ranger/2026-01-09 -- note -- 2026 projets.txt
9423abac9c08f00dbb220d37a8f9c9be41baeaa709b66264fcce803bafb9a06a  /media/veracrypt1/partition_laptop/a ranger/2026-01-14 -- note -- note voiture.txt
679f3a384e6cfda26aa73b92de71e58d694068e5c10249727a4995e8bf64b955  /media/veracrypt1/partition_laptop/a ranger/2026-01-17 -- note -- démarches admin.txt
d801c90937a7910f60c9aaafaa0f7eef166fcda624901531c1f49196d517f7ff  /media/veracrypt1/partition_laptop/a ranger/2026-01-20 -- note -- à faire.txt
ee174290fa4eb7943dcc1326b865f92dc9def3826daa64b8bdbc6e1a39050ee4  /media/veracrypt1/partition_laptop/a ranger/2026-01-21 -- note -- à modifier.txt
da06ddfa1fd6fbb74c85435663f6e9c6b8fc9bb337c937f384fc3750e1fba09a  /media/veracrypt1/partition_laptop/a ranger/2026-01-21 -- note -- election municipales.txt
27f0e6603d7698e266178b1abacd4d6b7f80f3a5c687705484faa9855ff629dd  /media/veracrypt1/partition_laptop/a ranger/2026-01-21 -- note -- espoir de changement.txt
ce7763cc61376c46ea4c7c97997894576b05ee6331a399fb8a5462735dc42820  /media/veracrypt1/partition_laptop/a ranger/2026-01-21 -- note -- ne pas devenir fou.txt
ce98437926c4cfb8050b329eaa855ee8066d72420ed7f5db1eaad3cce518ee91  /media/veracrypt1/partition_laptop/a ranger/2026-01-21 -- note -- todo -- les mails de moreno rsa.txt
3ac9778e2c88130820e5252621cce4010e2cb281c41bf20ad4082ed8a67709fb  /media/veracrypt1/partition_laptop/a ranger/2026-01-26 -- note -- changer assurance.txt
d57b79a8eb7a5c3cc7cd3e12523b666904c5124c7780596553e90bcff7204aa7  /media/veracrypt1/partition_laptop/a ranger/2026-01-28 -- note -- nqt suivi.txt
47ca309391159a6756a7647cbc0a1708b3672f2267a9d5e11fde87b203b2962f  /media/veracrypt1/partition_laptop/a ranger/2026-01-28 -- note -- todo maison.txt
06d6f2b939c3cad74bb00f0af66439f72d9595bb684e28267a98cdf1ca46bee8  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- liens_symboliques_bureau/documentation/ChatGPT-Création de liens symboliques.md
ec89bd4319943cd1d13df1a1fde217c533dfe928fc27623f00f433fa31da92ad  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- liens_symboliques_bureau/documentation/ChatGPT-Problème icônes et liens.md
437488efd6b0d3a36179808ea2e58ac8bb0be3a17930f21ebc4e1fdabf302765  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- liens_symboliques_bureau/documentation/ChatGPT-Problème script Bash.md
59eb5f67307877319e9a9fe1eb218e347c6598a29a9e20afe2b8a201db5a9d13  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- liens_symboliques_bureau/icons/icon_blue_star.png
273b951528979f04007b3332e3815b3b10f8d399298a3378e8f7b445438866df  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- liens_symboliques_bureau/icons/icon_free_file_sync.png
5e7346347cf59227ca8160b7c1a46d116a83c4800589340aa87377ce922a4077  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- liens_symboliques_bureau/liens.csv
bdc6e97ca44eff6910121e6a21679297a3b6ea9c4f0e3838c5def4c933ef5ec3  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- liens_symboliques_bureau/liens.ods
af1349b9f5f9a1a6a0404dea36dcc9499bcb25c9adc112b7cc9a93cae41f3262  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- liens_symboliques_bureau/README.md
137e9ceef8763633ce1badccff10e1eae1b7de3dcd3e199582518ef93154fbb2  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- liens_symboliques_bureau/script.sh
04e10e0705426d4f13c21dab233b1f666df31f32e60091d47bc211d86146a489  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- ReIcon/iconlayoutsforcm.ini
2658eb2f6a9a326fb83f0ca41cc2c168a8464fbb14a8d4b5f64f3947180af313  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- ReIcon/reicon.exe
cb93693c6906e54a28c7bc7dc210b95424b4782d79516ad5582868222af9dffc  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- ReIcon/reicon.ini
a65abadb7afc2d3b02db6fc9c82ddd422659d6a6d894155c17948b3fd7b97f6c  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- ReIcon/reicon_x64.exe
f23d1183986012e68747908d41a45667f6c87ab7f4af730d167bd9f93221ce86  /media/veracrypt1/partition_laptop/a ranger/2026-02-00 -- ReIcon/version_info.txt
72a3ab9ec68d078909dc096d77c0a436cd8d558d737ad66ace0aeb8082364291  /media/veracrypt1/partition_laptop/a ranger/2026-02-06 -- la cité des taupes -- dlq/2026-02-06 -- la cité des taupes -- dlq.jfif
d1b4afe035559de64329d77153f42b4b4567972d110d99c1c7dd716c98114b42  /media/veracrypt1/partition_laptop/a ranger/2026-02-06 -- la cité des taupes -- dlq/2026-02-06 -- la cité des taupes -- dlq.pdf
391576b330f224f476ac84c93e16d0a6cf37bc2090d2cb8e4102bee1aa63d163  /media/veracrypt1/partition_laptop/a ranger/2026-02-06 -- la cité des taupes -- dlq/dox la cité des taupes.txt
4d3397ee5c0339a5540a0fbaa3fd09802ea7bda76e3896da0e73208487477688  /media/veracrypt1/partition_laptop/a ranger/2026-02-10 -- 10-02-2026 -- llm -- valorisation des stages sur le marché du travail.md
bcd492dfd24662fc5533be695472423fa78018aa0d9c77374d9a851e7ffaef2b  /media/veracrypt1/partition_laptop/a ranger/2026-02-10 -- 10-02-2026 -- todo claude.txt
8180fc85d789dd5b07435cfd9270efe5db97030b8dd86c26e223911c6ccccd95  /media/veracrypt1/partition_laptop/a ranger/2026-02-10 -- 10-02-2026 -- voiture -- radar.png
786f2ab3dd38d82f82320cbbd75a164143333e5de0c0b639789e2fbbe676059c  /media/veracrypt1/partition_laptop/a ranger/2026-02-11 -- 11-02-2026 -- llm -- kant maîtrise et responsabilité de soi.md
d0edc708fcd16332562e8fe37414a2a9466cd2fdf0d3e6ab4d9358b2f643c420  /media/veracrypt1/partition_laptop/a ranger/2026-02-11 -- 11-02-2026 -- llm -- perception travail sexe classes sociales v1.md
c530a4626f44f3eb3590a5e176ff173ef77104d0850ef66e4f308379cdf5e2f8  /media/veracrypt1/partition_laptop/a ranger/2026-02-11 -- 11-02-2026 -- llm -- perception travail sexe classes sociales v2.md
f48bc09d0ca36fe7591ac65be60b8239dafa25bebd0757d13e70f250a9a09c84  /media/veracrypt1/partition_laptop/a ranger/2026-02-14 -- 14-02-2026 -- twitter -- pasvrmntpierre -- nan.pdf
c377f6ff2c2efd422c3606c328eb058bf348b1fef7b5a69d71e8dd9c65087f02  /media/veracrypt1/partition_laptop/a ranger/2026-02-16 -- 16-02-2026 -- maman
29303459a1d3d47a23a91e0a1a7d1fcf253da99842cbfbfc883f96a46eb0a733  /media/veracrypt1/partition_laptop/a ranger/2026-02-17 -- gestion des risques cassos emploi
d580c94a44f30e1d1933d428f080c1e1cd01ca86120635439f5a3cb9cc5d2634  /media/veracrypt1/partition_laptop/a ranger/2026-02-18 -- llm -- Afficher fichiers cachés Nautilus (1).md
da4b9648703684b1f9c996f71cf87867822ffd6ae69621e611b9a2c1d5c2a0e1  /media/veracrypt1/partition_laptop/a ranger/2026-02-18 -- llm -- Principes actifs prouvés.md
6a0e40f80e8b9959334f0977cfc05e5d46490dc283b58f764995102d57bfd6cf  /media/veracrypt1/partition_laptop/a ranger/2026-02-19 -- llm -- Holding patrimoniale et SCI.md
3134c0fa479b065cfc1efaddeee0a58fe6612d2a79e713f267ffe5589fc01fb3  /media/veracrypt1/partition_laptop/a ranger/2026-02-19 -- llm -- Redémarrer logiciel Linux.md
d186e33ff58dcc4f8cbf2ae2f2cc041a91b33819b6aef245f401c726f4c8195a  /media/veracrypt1/partition_laptop/a ranger/2026-02-19 -- twitter -- AnttonRouget -- nan.pdf
32d080b92a3c068660dc23d8b1e84252fa48f2af8a4f223817ef3114cc8a76ad  /media/veracrypt1/partition_laptop/a ranger/2026-02-19 -- twitter -- bluetouff -- nan.pdf
ecca58a96d0e5445917859bd1cc27ec3ca94950eadd6184886a35aeb4e307b6f  /media/veracrypt1/partition_laptop/a ranger/2026-02-20 -- cours anglais claude/English_101_Cours_Complet.docx
b45e3c87faea3d48f665b572e5f59fb979f90f0529867a284faac4ebba200f38  /media/veracrypt1/partition_laptop/a ranger/2026-02-20 -- cours anglais claude/English_101_Cours_Complet.pdf
e4d8189c79cac73c4188515242fd46297dd4a4917b0827c288f1a4971fe2bb75  /media/veracrypt1/partition_laptop/a ranger/2026-02-20 -- cours anglais claude/English_102_Cours_Complet.docx
a339470f2202220751c95b5698476eeda99803014fb5c16b63b99c1749da1ef5  /media/veracrypt1/partition_laptop/a ranger/2026-02-20 -- cours anglais claude/English_102_Cours_Complet.pdf
e960911762a6466c5146235afc89f6d375732eecfc1afedc956d1e310c0ae8fb  /media/veracrypt1/partition_laptop/a ranger/2026-02-20 -- cours anglais claude/English_103_Cours_Complet.docx
80b6fcda1e53a459c25d1911082b167318ec32e0a732c5f044dad3d95850b760  /media/veracrypt1/partition_laptop/a ranger/2026-02-20 -- cours anglais claude/English_103_Cours_Complet.pdf
c3bf9db6367548d1a1476d859c01bcdbe73db227d8d5a7a1f25d05c52d1b6a3b  /media/veracrypt1/partition_laptop/a ranger/2026-02-20 -- cours anglais claude/English_104_Cours_Complet.docx
ec5f0d1a42b5bbd73656b3c3eec967bcdc28b458c544ef66fa52695fdc8aadb2  /media/veracrypt1/partition_laptop/a ranger/2026-02-20 -- cours anglais claude/English_105_Cours_Complet.docx
fdd3a783567e19f14857640c34e136e5152ac5d1cc4b6cbf9b74516100bd280f  /media/veracrypt1/partition_laptop/a ranger/!administratif/2026-01-21 -- date des impots.txt
667ac19664cbfdcd2a2489d2f928ca9e37709467144ced0b4fe2a90fd0c336e2  /media/veracrypt1/partition_laptop/a ranger/!administratif/raccourci -- !a ranger.lnk
2ffcd28d0c0e38d9680dbfbac8ff94af47676e375719c8392bc464b7a5487802  /media/veracrypt1/partition_laptop/a ranger/!bureau aménagement intérieur/2025-10-29 -- bureau amenagement interieur 1.png
31acaaeea69f3a58c32f2e5beb94b0582e9a2346299a3beb82aa009edab8e165  /media/veracrypt1/partition_laptop/a ranger/!bureau aménagement intérieur/2025-10-29 -- bureau amenagement interieur 2.png
6557a23716ca5edbf7fa72b10aca7350c2335a5a9c7b23b5094f788ac8c39234  /media/veracrypt1/partition_laptop/a ranger/!bureau aménagement intérieur/2025-10-29 -- bureau amenagement interieur 3.png
276e82bb73e6b10abd6ab9f6ea541c54bf598ef888f228e5cde2b1a604736159  /media/veracrypt1/partition_laptop/a ranger/!bureau aménagement intérieur/llm -- l'histoire des lampes waldmann.md
c55f00fdf7576beb4c11fd9b80a480c09d0a5e1154fcdac90e1fa7b6da748372  /media/veracrypt1/partition_laptop/a ranger/!bureau/test mst.txt
100b181024b91bfc5d6d828bd0fa52adb6ccd2804c738a64e7541725ba78448b  /media/veracrypt1/partition_laptop/a ranger/!bureau/todo.txt
52fce69387f6eadb601f4ae71d56958430ae878908238a0c519ce0b06c217a87  /media/veracrypt1/partition_laptop/a ranger/!bureau/vitamines.txt
2dd09ad2011221e41ae46346f4e77790b8867876b0cb9409ee2197b6f52367a8  /media/veracrypt1/partition_laptop/a ranger/!config ordi et code/futur plateforme post ia/2026-02-14 -- 14-02-2026 -- j cloud et j wiki
cedc09e3803553f45df439ee7db06eb6a3108bf0e4e512acabda18a1780adc07  /media/veracrypt1/partition_laptop/a ranger/!config ordi et code/futur plateforme post ia/2026-02-14 -- 14-02-2026 -- plateformes ia pour données personnelles.odt
a924472c9d009b8287e7d9b429fe68fd5ba8285081823d2d2cd1992d98eb206b  /media/veracrypt1/partition_laptop/a ranger/!config ordi et code/futur plateforme post ia/2026-02-16 -- llm -- Langage et interfaces numériques (1).md
f934b328e1395f02d555d9542f090de0f761440bca18d93504d24bbc72540b08  /media/veracrypt1/partition_laptop/a ranger/!cuisine/2025-11-30 -- note -- cuisson pates.txt
0c3e855339bbec24f26ceef618b77bb8097d9472f9e333c64428d64083eb2d1d  /media/veracrypt1/partition_laptop/a ranger/!emploi/10-02-2026 -- cnam.txt
af40ddfcb5114cb86096bbe83b0b6131fca8b8c8d45237fda1cca1a5e09c15f9  /media/veracrypt1/partition_laptop/a ranger/!emploi/10-02-2026 -- llm -- financement formation cnam.md
a76db2a72bda817647bc16b86066a107c14b3de678609e7e3c7260d3b7f1888b  /media/veracrypt1/partition_laptop/a ranger/!emploi/11-02-2026 -- twitter -- tanguylacr0ix -- ghost job - réalité honnête.pdf
c179c9463f32d7c0160856e7a80d4fa8f841a1805cb4c6e8e45bb77800b48942  /media/veracrypt1/partition_laptop/a ranger/!emploi/2026-02-03 -- llm -- qui est responsable de quoi.md
84c97504d07df7d57f1881ab6684b991255928859023fc651bd3f63102a0d2a1  /media/veracrypt1/partition_laptop/a ranger/!emploi/2026-02-08 -- twitter -- energieduvide -- nan.pdf
98e15bdbc4c2aeb080c39bd5aad63e4214b59d76727bea576e98cdbc9b0f7ed1  /media/veracrypt1/partition_laptop/a ranger/!emploi/NQT/mail de bienvenu et info.pdf
f65348224478a20e09b72a304467ca2259ae77ff4c05103d6b27ab816f14ed10  /media/veracrypt1/partition_laptop/a ranger/!emploi/raccourci -- !a ranger.lnk
c1968f9a00ed33bf888574d897120dbf3b8c6c8b7e7a966ec42fe30039c6d561  /media/veracrypt1/partition_laptop/a ranger/!etudes/2026-01-19 -- le cube révélations sur les dérives de lenseignement supérieur privé -- claire marchal.epub
c0cd70c9e441852a9dd86ac9046b04267a8c58bdf53471f6c5eda72ef1ab4a2a  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- autre/2026-01-02 -- twitter -- lukas ekwueme -- gain travailler plus , plateau - allemagne.pdf
5fc5718ed4f5cb6b10b241dae288f131fb3abab730723643025e95b2fef5c72b  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- autre/2026-01-20 -- llm -- contrat de capitalisation fonctionnement et transmission.md
18e8dad8ea5c42aa645c75035e19e2384e6dfc6ae01bf302622aeb8aaa768ac9  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- autre/2026-01-21 -- llm -- imposition revenus de l'étranger.md
86fc9d1e9da6bda40b142085b1da983637c12b68bd71386c495bb5ca7f278537  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- autre/2026-01-21 -- twitter -- bayesreality - gain marginal du travail en france.pdf
bc775d811e2a466318303c754ac8cb63ba6ad965cde5a4038bc7772b285181ad  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- autre/2026-01-21 -- twitter -- kerguennecp - utilisation des llm anti pièges.pdf
f3a8a15aa4fc5cf3956950a8475d06166356ae08f26845b8da20e600a0d27e32  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- autre/2026-01-23 -- twitter -- boringbiz - immobilier politique économique.pdf
3ff22993ebdf17a68e33bc7ae014338c2d3a4cf36af9c85b1b69b5f25b7e470d  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- autre/2026-01-30 -- twitter -- tradeform -- a reflechir.pdf
fa7fd4b3c52d9bf0f3cdb4a7e95833192253c8b8808057d030bc3e5286a4460d  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- autre/2026-02-03 -- twitter -- cortisquared -- explication conséquence austérité.pdf
bc17436ce6009b73b9021f2356543bbd87769a722fab648d5c1be343d8ced762  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- autre/2026-02-06 -- différence niveau de vie retraite actif.png
4a52c06fb7e4e3574bd903bd119ec8df32c7b0a62b25dec6490c880f4241f576  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- autre/raccourci -- !a ranger - politique economique.lnk
e91a5f115890208ea7ad102354931692255314a18a561200124761152bfad2da  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- invest/08-02-2026 --  danger squat immobilier.png
11427c5119666656d59ab4f6d3ce3469f9b9d2c39bf2212b7065040423b990a9  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- invest/14-02-2026 -- asset breakdown by wealth level.jpeg
2c945df5457a8cf3ffe3ab23ebc705cf2e25d526cdccab17336609e8837e20ab  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- invest/14-02-2026 -- scf23.pdf
47056278813c4b39902d02e613d0b232052c681c9af2f785a070decb5985442e  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- invest/2026-01-30 -- 100331-brinson determinants portfolio performance.pdf
e08b8b904bdae9457e91e9115f3de4a748b8c203aa6d57db2face739e7e412d6  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- invest/2026-02-01 -- minimum veilliesse retraite.jfif
d1486b50cffc92041890cc4b0af99b4b726c894551de4031f956a1ee885b5fe9  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- invest/capture d’écran 2026-02-10 190008.png
515e40a5ce54231709b7c83c4bade55db86120492358cf66d9b5c835ca5e5f96  /media/veracrypt1/partition_laptop/a ranger/!finance economie -- invest/raccourci -- !a ranger - invest.lnk
907fdf51e9520465ac3dd7349b5dd782728acb602fca8a1d67691a17d4cd85a6  /media/veracrypt1/partition_laptop/a ranger/!methode/2025-12-31 -- llm -- lois de puissance et pareto.md
3be9a70905415cd6619c50575ea3545e1e13b2caef802254040353e01d01f07f  /media/veracrypt1/partition_laptop/a ranger/!methode/2026-01-05 -- probable doublon -- 2026-01-01 -- llm -- unknown unknown.md
5115980df5d067184eb641dbf134afd7c8964ca93f094309476890405cb3f1fa  /media/veracrypt1/partition_laptop/a ranger/!methode/2026-01-24 -- méthode rédaction de documentation technique.txt
862ea856bbd2873d5bb72a7026cfcbda5a7b0fa6aaaaaca20e7de718b4f8d408  /media/veracrypt1/partition_laptop/a ranger/!methode/2026-01-27 -- llm -- réponse sans documents externes (2).md
55c21961428cb882cc488ddcb906883b28f8226beef90dc5099622d9602ce673  /media/veracrypt1/partition_laptop/a ranger/!methode/2026-01-27 -- méthode -- vue intra fichier ou intra dossier.txt
24b88ded84b91877bc4cb6b1f865b37ad32241501eae6df964e9ab9dfd6a9016  /media/veracrypt1/partition_laptop/a ranger/!methode/2026-02-03 -- llm -- trouver des modèles excel professionnels.md
e90952c61460544580275344fc4ea8e70b27248c1624a057d80f11323f5bc54c  /media/veracrypt1/partition_laptop/a ranger/!methode/2026-02-04 -- llm -- trouver des modèles excel professionnels.md
35f25d5af77c6d0bee2d16b55f1b93cf30469966e449ff5bb7c9892d23ff2d00  /media/veracrypt1/partition_laptop/a ranger/!methode/2026-02-07 -- llm -- programme de formation en résolution de problèmes (1).md
6e942e7e238acf92e09f9ddc7275207ab67f0c318218f95e98919c1bbeabd296  /media/veracrypt1/partition_laptop/a ranger/!methode/2026-02-07 -- llm -- sommaire du cours - critical thinking 101.md
01d1db4204c6f8c3adcddc6d384dba62cb2738c24485d76c8b0b8e5e1228b377  /media/veracrypt1/partition_laptop/a ranger/!methode/2026-02-07 -- llm -- sommaire du cours - decision making 101.md
ed922548073d1522c31ba0e533b5791cd36f6f42d92be4b2eb8ae1aaaff08830  /media/veracrypt1/partition_laptop/a ranger/!methode/2026-02-07 -- llm -- sommaire du cours - problem solving 101.md
01f3d8fdc8e31b4bb3f83d578a57556824d015616375420c7324b695389a5bb4  /media/veracrypt1/partition_laptop/a ranger/!methode/llm -- sommaire du cours truth-seeking 101.md
f82e126cab2c8a688c693a8c77ae84c62f9fa5251420806fbb138d1fd6c19809  /media/veracrypt1/partition_laptop/a ranger/!methode/raccourci -- !a ranger.lnk
9be0756aa1d2ec10c8a9aefd546153086ab8d534d0cb8eade14043eefef1ff6f  /media/veracrypt1/partition_laptop/a ranger/!musique/2026-01-17 -- open MPT tuto/2026-01-17 -- adresse samples.txt
d9d6795348e604e72da11ca4b496c3674f3502d9f35219865003220499382c78  /media/veracrypt1/partition_laptop/a ranger/!musique/2026-01-17 -- open MPT tuto/2026-01-17 -- llm -- premiers pas avec openmpt.md
bac1f4cb55d67135d2be02b40f6ae82757fca5a1c6e7c21677682737bcd39bb6  /media/veracrypt1/partition_laptop/a ranger/!musique/2026-01-17 -- open MPT tuto/2026-01-17 -- module2.bak
50677732c591a08a1968fea152e6cc16785f0ab4b48a3f9c6cc351a5a6cfc140  /media/veracrypt1/partition_laptop/a ranger/!musique/2026-01-17 -- open MPT tuto/2026-01-17 -- module2.it
936a972d1abf57343d0487fe9585c2fb5b9ae54be6d40c4eee6bb4113b547220  /media/veracrypt1/partition_laptop/a ranger/!musique/2026-01-17 -- open MPT tuto/2026-01-17 -- module2.wav
afd6ed8968fb6256dcf7c7cd04fdf1bac00a12ff78ef55ef8ece4952f26419b5  /media/veracrypt1/partition_laptop/a ranger/!musique/2026-01-17 -- open MPT tuto/2026-01-17 -- pas de son.txt
8813524c4e8fd78206dbf01c1348a6a943bec671ddcf63057bb08e813ad742ed  /media/veracrypt1/partition_laptop/a ranger/!musique/raccourci -- !a ranger.lnk
714d86766b49c2239a962c7e6a5b6ee49cf180284a6361a55a189870b9727df7  /media/veracrypt1/partition_laptop/a ranger/!news/2025-11-30 -- llm -- evolution de youtube.md
33a806a8d3988a0cccd1718d6ab43a2f41d3af8d228ac59edf955db05e6ff2de  /media/veracrypt1/partition_laptop/a ranger/!news/2025-12-17 -- reddit -- piege raig bait reseaux.png
724bf11a9ed571a1435586347401a72380af455bf62c4c65051902c77a44644e  /media/veracrypt1/partition_laptop/a ranger/!news/raccourci -- !a ranger.lnk
3edeb7686e5bf08aafabb8374632d996d02156cbd0d8141c6d1d0e6fac4f9033  /media/veracrypt1/partition_laptop/a ranger/!relationel/raccourci -- !a ranger.lnk
d6327fad6f5f245f57311f4d97f5fb5c4730168fcae80f770b671ff400629c44  /media/veracrypt1/partition_laptop/a ranger/!sante/10-02-2026 -- llm -- types de boutons cutanés (2).md
f12f8faa7a6aaa4a203f99d779547029d4af13dcd6532e76db9be9d9baaacdf2  /media/veracrypt1/partition_laptop/a ranger/!sante/13-02-2026 -- llm -- aspirations rectales possibles.md
7e097c5c8ae83ec76d86d1b4a905222c7073eb34b07bf850a775bc0ed183aa33  /media/veracrypt1/partition_laptop/a ranger/!sante/2026-01-05 -- probable doublon -- 2026-01-01 -- llm-coût réanimation en france.md
297c06106653c8a3a9d119f9acdb64056efd7e5cf15a5f503a781bf9eeba64a1  /media/veracrypt1/partition_laptop/a ranger/!sante/2026-01-05 -- probable doublon -- 2026-01-01 -- llm -- néo-assureurs l'assurance réinventée.md
494f553dc53da8933d3fe4e592df681026ea824b48dd881ecc97a4ad3cd293cb  /media/veracrypt1/partition_laptop/a ranger/!sante/2026-01-05 -- probable doublon -- 2026-01-01 -- llm -- santé mutuelle.md
dd6e9b9b23ae8e3bfd68c87978ea879708f2e825cf8cc6ce506fc6006a78f91a  /media/veracrypt1/partition_laptop/a ranger/!sante/raccourci -- !a ranger.lnk
dcf3ed4926e78e026bcc626374eef7a1600c4b0df22b03dd1a1bcdf566846647  /media/veracrypt1/partition_laptop/a ranger/!securite/2026-02-14 -- 14-02-2026 -- mort de quentin.pdf
5581009cba0babc976b4ffdf2af42d3820fbee43124e86fc700c4251f7445505  /media/veracrypt1/partition_laptop/a ranger/!securite/raccourci -- !a ranger.lnk
0962f63b8342bbabcd2fd2565389fbecffabf02325c5aa2d251d9b5f3d256d1a  /media/veracrypt1/partition_laptop/a ranger/!sensible/5Inayabeurrette profil 2 escorte/escort_annecy_inayabeurrette_98a9cc.jpg
2a6c98f23c44a5dce385fc629cb6d7760439882156b815a8c7efe220e4c5fd0d  /media/veracrypt1/partition_laptop/a ranger/!sensible/5Inayabeurrette profil 2 escorte/escort_toulouse_inayabeurrette_10c11d.jpg
b526f941211c446bf3503c52973303a55cc8e62e33fd2defdb6d356d6078eede  /media/veracrypt1/partition_laptop/a ranger/!sensible/5Inayabeurrette profil 2 escorte/escort_toulouse_inayabeurrette_3209bc.jpg
0977b8d2dbb8499100fb3fc108c268b8386baf8a9ffdd0f8447178cf5c026159  /media/veracrypt1/partition_laptop/a ranger/!sensible/5Inayabeurrette profil 2 escorte/escort_toulouse_inayabeurrette_7330ef.jpg
ba3acf0ae21fa6e690260311c9e5ad088352b95f1193704800e5b3d6b7da8ca3  /media/veracrypt1/partition_laptop/a ranger/!sensible/5Inayabeurrette profil 2 escorte/escort_toulouse_inayabeurrette_78938f.jpg
ddf7cb84bc619903ac1c947ccc5e9f01275a52f025a25ba1ff3a861d32d4f38e  /media/veracrypt1/partition_laptop/a ranger/!sensible/5Inayabeurrette profil 2 escorte/escort_toulouse_inayabeurrette_875ddf.jpg
b0a1b9438733103669d1a6f1884cabc3f7c51b0628a42d681b8f37e1eabeaace  /media/veracrypt1/partition_laptop/a ranger/!sensible/5Inayabeurrette profil 2 escorte/escort_toulouse_inayabeurrette_93f187.jpg
55455704b3bd07762b91447c0a8e1e8faca7655fa6c59c4980cd255eab732e38  /media/veracrypt1/partition_laptop/a ranger/!sensible/5Inayabeurrette profil 2 escorte/escort_toulouse_inayabeurrette_9ec9ca.jpg
53e296809a791a730cbe077c69ff47e9746e7ef08be33f8a4b99da3279ac1af2  /media/veracrypt1/partition_laptop/a ranger/!sensible/5Inayabeurrette profil 2 escorte/screencapture-sexemodel-escort-inayabeurrette-2291132-2026-02-11-02_17_12.pdf
8c732412b8e9534ff4c6cafb95cf115c7a0e512821f05e259806fe9ee9cf3383  /media/veracrypt1/partition_laptop/a ranger/!vie publique et politique/raccourci -- !a ranger.lnk
4e3800d45000f17e683b7d157739b186217417e7917563b72d8293d692e6c515  /media/veracrypt1/partition_laptop/a ranger/!voiture/raccourci -- !a ranger.lnk




























































--- Fichier : integrity.sh ---
#!/usr/bin/env bash
# integrity.sh — vérification d'intégrité par hachage BLAKE3
#
# Usage :
#   ./integrity.sh compute <dossier> <base.b3>
#   ./integrity.sh verify  <base.b3> [dossier]
#   ./integrity.sh compare <ancienne.b3> <nouvelle.b3>
#
# Options :
#   --quiet   Supprime toute sortie terminal ; écrit uniquement dans les
#             fichiers de résultats (recap.txt, failed.txt, etc.).
#             Utile pour usage en CI/cron/script parent.
#
# Dépendances : b3sum, find, sort, awk, comm, join, stat, du

set -euo pipefail

# ── Vérification version bash ──────────────────────────────────────────────────

(( BASH_VERSINFO[0] >= 4 )) || {
  echo "ERREUR : bash >= 4 requis (actuel : $BASH_VERSION)" >&2
  exit 1
}

# ── Parsing des arguments ──────────────────────────────────────────────────────

QUIET=0
ARGS=()

for arg in "$@"; do
  case "$arg" in
    --quiet) QUIET=1 ;;
    *)       ARGS+=("$arg") ;;
  esac
done

MODE="${ARGS[0]:-}"
ARG2="${ARGS[1]:-}"
ARG3="${ARGS[2]:-}"

# ── Configuration ──────────────────────────────────────────────────────────────

# Dossier racine où seront créés les sous-dossiers de résultats.
# Modifier ce chemin selon l'environnement.
RESULTATS_DIR="${RESULTATS_DIR:-${HOME}/integrity_resultats}"

# ── Fonctions utilitaires ──────────────────────────────────────────────────────

# Affiche un message d'erreur sur stderr et quitte.
die() {
  echo "ERREUR : $*" >&2
  exit 1
}

# Affiche sur stdout uniquement si --quiet n'est pas actif.
say() {
  (( QUIET )) || echo "$@"
}

# Vérifie qu'un fichier .b3 est valide : existe, est un fichier, non vide,
# contient au moins une ligne au format b3sum (<hash>  <chemin>).
assert_b3_valid() {
  local file="$1"
  local label="${2:-$file}"

  [ -e "$file" ] || die "$label : fichier introuvable."
  [ -f "$file" ] || die "$label : est un dossier, pas un fichier .b3."
  [ -s "$file" ] || die "$label : fichier vide — aucun hash à traiter."

  local first_valid
  first_valid=$(grep -m1 -E '^[0-9a-f]{64}  .+' "$file" || true)
  [ -n "$first_valid" ] || die "$label : format invalide — aucune ligne au format b3sum détectée."
}

# Vérifie qu'un dossier cible est valide et contient au moins un fichier.
assert_target_valid() {
  local dir="$1"

  [ -e "$dir" ] || die "Dossier cible introuvable : $dir"
  [ -d "$dir" ] || die "Le chemin cible n'est pas un dossier : $dir"

  local nb_files
  # -print0 + grep -zc : robuste aux noms de fichiers contenant des newlines
  nb_files=$(find "$dir" -type f -print0 | grep -zc '' || echo 0)
  (( nb_files > 0 )) || die "Le dossier $dir ne contient aucun fichier — rien à hacher."
}

# Taille d'un fichier en octets — abstraction GNU/BSD
file_size() {
  local f="$1"
  if stat -c%s "$f" 2>/dev/null; then
    return
  fi
  # BSD/macOS fallback
  stat -f%z "$f"
}

# ── Fonctions principales ──────────────────────────────────────────────────────

# Calcule le hash BLAKE3 de chaque fichier du dossier cible, fichier par fichier,
# en affichant la progression et une estimation du temps restant (ETA).
# La progression est écrite sur le terminal (/dev/tty) uniquement si --quiet
# n'est pas actif, jamais dans le fichier de hashes.
# Usage : compute_with_progress <dossier> <hashfile>
compute_with_progress() {
  local target="$1"
  local hashfile="$2"

  local -a files
  mapfile -d '' files < <(find "$target" -type f -print0 | sort -z)

  local total_files=${#files[@]}
  local total_bytes
  total_bytes=$(du -sb "$target" | awk '{print $1}')

  local bytes_done=0
  local t_start
  t_start=$(date +%s)

  local i=0
  for file in "${files[@]}"; do
    b3sum "$file" >> "$hashfile"

    bytes_done=$(( bytes_done + $(file_size "$file") ))
    i=$(( i + 1 ))

    if (( ! QUIET )); then
      local t_now elapsed
      t_now=$(date +%s)
      elapsed=$(( t_now - t_start ))

      if (( bytes_done > 0 && elapsed > 0 )); then
        local speed remaining
        speed=$(( bytes_done / elapsed ))
        remaining=$(( (total_bytes - bytes_done) / speed ))
        printf "\r[%d/%d] ETA : %dm %02ds   " \
          "$i" "$total_files" $(( remaining / 60 )) $(( remaining % 60 )) > /dev/tty
      fi
    fi
  done

  if (( ! QUIET )); then
    printf "\r%*s\r" 40 "" > /dev/tty  # effacer la ligne de progression
  fi
}

# Crée le dossier de résultats nommé d'après le fichier .b3 fourni.
# Horodaté si le dossier existe déjà, pour éviter l'écrasement silencieux.
# Usage : outdir=$(make_result_dir <fichier.b3>)
make_result_dir() {
  local b3file="$1"
  local basename
  basename=$(basename "$b3file" .b3)
  local outdir="${RESULTATS_DIR}/resultats_${basename}"

  if [ -d "$outdir" ]; then
    outdir="${outdir}_$(date +%Y%m%d-%H%M%S)"
  fi

  mkdir -p "$outdir"
  echo "$outdir"
}

# Produit les fichiers de résultats pour le mode verify.
# Usage : run_verify <hashfile_absolu>
run_verify() {
  local hashfile="$1"
  local outdir
  outdir=$(make_result_dir "$hashfile")

  local raw exit_code
  raw=$(b3sum --check "$hashfile" 2>&1) && exit_code=0 || exit_code=$?

  # Séparer les lignes OK, FAILED, et les erreurs b3sum (ni OK ni FAILED)
  local lines_ok lines_failed lines_error
  lines_ok=$(echo    "$raw" | grep ': OK$'     || true)
  lines_failed=$(echo "$raw" | grep ': FAILED'  || true)
  lines_error=$(echo  "$raw" | grep -Ev ': (OK|FAILED)' | grep -v '^$' || true)

  # Comptage robuste : grep -c '^' compte toutes les lignes non vides du flux
  local nb_ok nb_failed
  if [ -n "$lines_ok" ]; then
    nb_ok=$(echo "$lines_ok" | grep -c '^')
  else
    nb_ok=0
  fi
  if [ -n "$lines_failed" ]; then
    nb_failed=$(echo "$lines_failed" | grep -c '^')
  else
    nb_failed=0
  fi

  local statut
  if [ -n "$lines_error" ]; then
    statut="ERREUR"
  elif (( nb_failed > 0 )); then
    statut="ECHEC"
  else
    statut="OK"
  fi

  # ── recap.txt ────────────────────────────────────────────────────────────────
  {
    echo "════════════════════════════════════════"
    echo "  STATUT : $statut"
    echo "════════════════════════════════════════"
    echo ""
    echo "Commande  : integrity.sh verify $(basename "$hashfile")"
    echo "Date      : $(date)"
    echo "Base      : $hashfile"
    echo ""
    echo "OK        : $nb_ok"
    if (( nb_failed > 0 )); then
      echo "FAILED    : $nb_failed  ← voir failed.txt"
    fi
    if [ -n "$lines_error" ]; then
      echo ""
      echo "── Erreurs b3sum ──────────────────────"
      echo "$lines_error"
    fi
  } > "${outdir}/recap.txt"

  # ── failed.txt — créé uniquement si des échecs existent ───────────────────
  if (( nb_failed > 0 )) || [ -n "$lines_error" ]; then
    {
      echo "════════════════════════════════════════"
      echo "  FICHIERS EN ECHEC"
      echo "════════════════════════════════════════"
      echo ""
      if (( nb_failed > 0 )); then
        echo "$lines_failed"
      fi
      if [ -n "$lines_error" ]; then
        echo ""
        echo "── Erreurs ────────────────────────────"
        echo "$lines_error"
      fi
    } > "${outdir}/failed.txt"
  else
    rm -f "${outdir}/failed.txt"
  fi

  # ── Affichage terminal (supprimé si --quiet) ───────────────────────────────
  if [ "$statut" = "OK" ]; then
    say "Vérification OK — $nb_ok fichiers intègres."
  else
    say ""
    say "████████████████████████████████████████"
    if [ "$statut" = "ERREUR" ]; then
      say "  ERREUR lors de la vérification"
    else
      say "  ECHEC : $nb_failed fichier(s) corrompu(s) ou manquant(s)"
    fi
    say "████████████████████████████████████████"
    say ""
    if (( nb_failed > 0 )); then say "$lines_failed"; fi
    if [ -n "$lines_error" ]; then say "$lines_error"; fi
    say ""
  fi

  say "Résultats dans : $outdir"
  say "  recap.txt"
  if (( nb_failed > 0 )) || [ -n "$lines_error" ]; then
    say "  failed.txt"
  fi

  # Propager l'échec au appelant en mode --quiet (utile pour CI)
  return $exit_code
}

# Produit les fichiers de résultats pour le mode compare.
# Usage : run_compare <ancienne.b3> <nouvelle.b3>
run_compare() {
  local old="$1"
  local new="$2"
  local outdir
  outdir=$(make_result_dir "$old")

  local tmp_old tmp_new
  tmp_old=$(mktemp)
  tmp_new=$(mktemp)

  # Nettoyage garanti même en cas d'erreur intermédiaire
  trap 'rm -f "$tmp_old" "$tmp_new"' EXIT

  # sort -k2,2 : clé limitée au seul champ 2 (chemin), sans déborder sur le hash
  sort -k2,2 "$old" > "$tmp_old"
  sort -k2,2 "$new" > "$tmp_new"

  # modifies.b3 : fichiers présents dans les deux bases avec hash différent
  join -1 2 -2 2 "$tmp_old" "$tmp_new" \
    | awk '$2 != $3 {print $3, $1}' \
    > "${outdir}/modifies.b3"

  # disparus.txt : fichiers dans A absents de B
  comm -23 <(awk '{print $2}' "$tmp_old") \
           <(awk '{print $2}' "$tmp_new") \
    > "${outdir}/disparus.txt"

  # nouveaux.txt : fichiers dans B absents de A
  comm -13 <(awk '{print $2}' "$tmp_old") \
           <(awk '{print $2}' "$tmp_new") \
    > "${outdir}/nouveaux.txt"

  local nb_modifies nb_disparus nb_nouveaux
  nb_modifies=$(wc -l < "${outdir}/modifies.b3")
  nb_disparus=$(wc -l < "${outdir}/disparus.txt")
  nb_nouveaux=$(wc -l < "${outdir}/nouveaux.txt")

  # recap.txt
  {
    echo "Commande      : integrity.sh compare $(basename "$old") $(basename "$new")"
    echo "Date          : $(date)"
    echo "Ancienne base : $old"
    echo "Nouvelle base : $new"
    echo ""
    echo "Modifiés      : $nb_modifies"
    echo "Disparus      : $nb_disparus"
    echo "Nouveaux      : $nb_nouveaux"
  } > "${outdir}/recap.txt"

  rm -f "$tmp_old" "$tmp_new"
  trap - EXIT  # désarmer le trap après nettoyage explicite

  say "Résultats enregistrés dans : $outdir"
  say "  recap.txt     — modifiés: $nb_modifies, disparus: $nb_disparus, nouveaux: $nb_nouveaux"
  say "  modifies.b3   — $nb_modifies fichiers"
  say "  disparus.txt  — $nb_disparus fichiers"
  say "  nouveaux.txt  — $nb_nouveaux fichiers"
}

# ── Dispatch ──────────────────────────────────────────────────────────────────

case "$MODE" in
  compute)
    [ -n "$ARG2" ] || die "compute : dossier cible manquant.\nUsage : $0 compute <dossier> <base.b3>"
    [ -n "$ARG3" ] || die "compute : fichier de sortie .b3 manquant.\nUsage : $0 compute <dossier> <base.b3>"
    [ ! -d "$ARG3" ] || die "compute : '$ARG3' est un dossier. Le fichier .b3 de sortie doit être un chemin de fichier."
    assert_target_valid "$ARG2"
    compute_with_progress "$ARG2" "$ARG3"
    say "Base enregistrée : $ARG3 ($(wc -l < "$ARG3") fichiers)"
    ;;

  verify)
    [ -n "$ARG2" ] || die "verify : fichier .b3 manquant.\nUsage : $0 verify <base.b3> [dossier]"
    assert_b3_valid "$ARG2" "base"
    # Résoudre le chemin absolu du .b3 AVANT tout cd
    HASHFILE_ABS="$(cd "$(dirname "$ARG2")" && pwd)/$(basename "$ARG2")"
    if [ -n "$ARG3" ]; then
      [ -d "$ARG3" ] || die "verify : '$ARG3' n'est pas un dossier valide."
      cd "$ARG3"
    fi
    run_verify "$HASHFILE_ABS"
    ;;

  compare)
    [ -n "$ARG2" ] || die "compare : fichier ancienne base manquant.\nUsage : $0 compare <ancienne.b3> <nouvelle.b3>"
    [ -n "$ARG3" ] || die "compare : fichier nouvelle base manquant.\nUsage : $0 compare <ancienne.b3> <nouvelle.b3>"
    assert_b3_valid "$ARG2" "ancienne base"
    assert_b3_valid "$ARG3" "nouvelle base"
    run_compare "$ARG2" "$ARG3"
    ;;

  *)
    echo "Usage:"
    echo "  $0 [--quiet] compute <dossier> <base.b3>"
    echo "  $0 [--quiet] verify  <base.b3> [dossier]"
    echo "  $0 [--quiet] compare <ancienne.b3> <nouvelle.b3>"
    echo ""
    echo "Options:"
    echo "  --quiet   Silencieux : écrit uniquement dans les fichiers de résultats."
    exit 1
    ;;
esac





































--- Fichier : temp.txt ---

bash ./integrity.sh compute "/media/veracrypt1/partition_laptop/a ranger" hashes_2026-02-21.b3


bash ./integrity.sh compare hash_1.b3 hash_2.b3

--- Fichier : mon_dossier/destination/fichier (1).txt ---
Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of "de Finibus Bonorum et Malorum" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. The first line of Lorem Ipsum, "Lorem ipsum dolor sit amet..", comes from a line in section 1.10.32.



--- Fichier : mon_dossier/destination/fichier (2).txt ---
There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable. If you are going to use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing hidden in the middle of text. All the Lorem Ipsum generators on the Internet tend to repeat predefined chunks as necessary, making this the first true generator on the Internet. It uses a dictionary of over 200 Latin words, combined with a handful of model sentence structures, to generate Lorem Ipsum which looks reasonable. The generated Lorem Ipsum is therefore always free from repetition, injected humour, or non-characteristic words etc.



--- Fichier : mon_dossier/destination/fichier (3).txt ---
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.



--- Fichier : mon_dossier/destination/fichier (4).txt ---
It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).



--- Fichier : mon_dossier/source/fichier (1).txt ---
Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of "de Finibus Bonorum et Malorum" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. The first line of Lorem Ipsum, "Lorem ipsum dolor sit amet..", comes from a line in section 1.10.32.

fichier modifié



--- Fichier : mon_dossier/source/fichier (2).txt ---
There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable. If you are going to use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing hidden in the middle of text. All the Lorem Ipsum generators on the Internet tend to repeat predefined chunks as necessary, making this the first true generator on the Internet. It uses a dictionary of over 200 Latin words, combined with a handful of model sentence structures, to generate Lorem Ipsum which looks reasonable. The generated Lorem Ipsum is therefore always free from repetition, injected humour, or non-characteristic words etc.



--- Fichier : mon_dossier/source/fichier (3).txt ---
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.



--- Fichier : mon_dossier/source/fichier (4).txt ---
It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).



--- Fichier : tests/run_tests.sh ---
#!/usr/bin/env bash
# run_tests.sh — suite de tests automatisée pour integrity.sh
# Usage : ./run_tests.sh
# Prérequis : b3sum, stat, du installés ; integrity.sh dans le dossier parent

set -euo pipefail

# ── Configuration ─────────────────────────────────────────────────────────────

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
INTEGRITY="$SCRIPT_DIR/../integrity.sh"
WORKDIR="$(mktemp -d /tmp/integrity-test.XXXXXX)"

# Rediriger les résultats dans le WORKDIR pour les tests
export RESULTATS_DIR="$WORKDIR/resultats"

# ── Couleurs ──────────────────────────────────────────────────────────────────

GREEN='\033[0;32m'
RED='\033[0;31m'
NC='\033[0m'

# ── Compteurs ─────────────────────────────────────────────────────────────────

PASS=0
FAIL=0
TOTAL=0

# ── Helpers ───────────────────────────────────────────────────────────────────

pass() { echo -e "${GREEN}  PASS${NC} — $1"; ((PASS++)); ((TOTAL++)); }
fail() { echo -e "${RED}  FAIL${NC} — $1"; ((FAIL++)); ((TOTAL++)); }

assert_exit_zero() {
  local label="$1"; shift
  if "$@" > /dev/null 2>&1; then pass "$label"; else fail "$label"; fi
}

assert_exit_nonzero() {
  local label="$1"; shift
  if ! "$@" > /dev/null 2>&1; then pass "$label"; else fail "$label"; fi
}

assert_contains() {
  local label="$1"
  local pattern="$2"
  local output="$3"
  if echo "$output" | grep -q "$pattern"; then pass "$label"; else fail "$label (pattern: '$pattern' absent)"; fi
}

assert_not_contains() {
  local label="$1"
  local pattern="$2"
  local output="$3"
  if ! echo "$output" | grep -q "$pattern"; then pass "$label"; else fail "$label (pattern: '$pattern' présent mais ne devrait pas l'être)"; fi
}

assert_line_count() {
  local label="$1"
  local expected="$2"
  local file="$3"
  local actual
  actual=$(wc -l < "$file")
  if [ "$actual" -eq "$expected" ]; then pass "$label"; else fail "$label (attendu: $expected lignes, obtenu: $actual)"; fi
}

assert_file_exists() {
  local label="$1"
  local file="$2"
  if [ -f "$file" ]; then pass "$label"; else fail "$label (fichier absent : $file)"; fi
}

assert_file_absent() {
  local label="$1"
  local file="$2"
  if [ ! -f "$file" ]; then pass "$label"; else fail "$label (fichier présent à tort : $file)"; fi
}

# ── Setup ─────────────────────────────────────────────────────────────────────

setup() {
  mkdir -p "$WORKDIR/data/sub"
  echo "contenu alpha"  > "$WORKDIR/data/alpha.txt"
  echo "contenu beta"   > "$WORKDIR/data/beta.txt"
  echo "contenu gamma"  > "$WORKDIR/data/gamma.txt"
  echo "contenu delta"  > "$WORKDIR/data/sub/delta.txt"
}

teardown() {
  rm -rf "$WORKDIR"
}

# ── Tests ─────────────────────────────────────────────────────────────────────

run_tests() {
  cd "$WORKDIR"

  echo ""
  echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
  echo "  integrity.sh — suite de tests"
  echo "  Workdir : $WORKDIR"
  echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
  echo ""

  # ── T00 : ShellCheck ──────────────────────────────────────────────────────
  echo "T00 — ShellCheck"
  if command -v shellcheck &> /dev/null; then
    assert_exit_zero "ShellCheck integrity.sh" shellcheck "$INTEGRITY"
    assert_exit_zero "ShellCheck run_tests.sh" shellcheck "$0"
  else
    echo "  SKIP — shellcheck non installé (apt install shellcheck)"
  fi
  echo ""

  # ── T01 : Compute de base ─────────────────────────────────────────────────
  echo "T01 — Compute de base"
  bash "$INTEGRITY" compute ./data base_t01.b3 > /dev/null 2>&1
  assert_line_count "base_t01.b3 contient 4 lignes" 4 base_t01.b3

  local first_line
  first_line=$(head -1 base_t01.b3)
  assert_contains "ligne au format <hash>  <chemin>" "  ./data/" "$first_line"
  echo ""

  # ── T02 : Verify sans modification ───────────────────────────────────────
  echo "T02 — Verify sans modification"
  local out_t02
  out_t02=$(bash "$INTEGRITY" verify base_t01.b3 2>&1 || true)
  assert_not_contains "aucun FAILED dans terminal" "FAILED" "$out_t02"
  assert_contains     "terminal indique OK"        "OK"     "$out_t02"

  local outdir_t02
  outdir_t02=$(ls -d "${RESULTATS_DIR}/resultats_base_t01"* 2>/dev/null | tail -1)
  assert_file_exists "recap.txt créé"   "${outdir_t02}/recap.txt"
  assert_contains    "recap contient OK" "OK" "$(cat "${outdir_t02}/recap.txt")"
  assert_file_absent "failed.txt absent si 0 échec" "${outdir_t02}/failed.txt"
  echo ""

  # ── T03 : Verify après corruption ────────────────────────────────────────
  echo "T03 — Verify après corruption d'un fichier"
  echo "contenu modifié" > data/beta.txt
  local out_t03
  out_t03=$(bash "$INTEGRITY" verify base_t01.b3 2>&1 || true)
  assert_contains "terminal affiche bloc ECHEC"    "ECHEC"   "$out_t03"
  assert_contains "terminal liste beta.txt FAILED" "FAILED"  "$out_t03"

  local outdir_t03
  outdir_t03=$(ls -d "${RESULTATS_DIR}/resultats_base_t01"* 2>/dev/null | tail -1)
  assert_file_exists "failed.txt créé"              "${outdir_t03}/failed.txt"
  assert_contains    "failed.txt contient beta.txt" "beta.txt" "$(cat "${outdir_t03}/failed.txt")"
  assert_contains    "recap indique FAILED > 0"     "FAILED"   "$(cat "${outdir_t03}/recap.txt")"
  # Restauration
  echo "contenu beta" > data/beta.txt
  echo ""

  # ── T04 : Verify après suppression ───────────────────────────────────────
  echo "T04 — Verify après suppression d'un fichier"
  rm data/gamma.txt
  local out_t04
  out_t04=$(bash "$INTEGRITY" verify base_t01.b3 2>&1 || true)
  assert_contains "gamma.txt FAILED" "FAILED" "$out_t04"
  # Restauration
  echo "contenu gamma" > data/gamma.txt
  echo ""

  # ── T05 : Compare — aucune différence ────────────────────────────────────
  echo "T05 — Compare : aucune différence"
  bash "$INTEGRITY" compute ./data base_t05.b3 > /dev/null 2>&1
  bash "$INTEGRITY" compare base_t01.b3 base_t05.b3 > /dev/null 2>&1

  local outdir_t05
  outdir_t05=$(ls -d "${RESULTATS_DIR}/resultats_base_t01"* 2>/dev/null | tail -1)
  assert_file_exists "recap.txt créé"    "${outdir_t05}/recap.txt"
  assert_file_exists "modifies.b3 créé"  "${outdir_t05}/modifies.b3"
  assert_file_exists "disparus.txt créé" "${outdir_t05}/disparus.txt"
  assert_file_exists "nouveaux.txt créé" "${outdir_t05}/nouveaux.txt"
  assert_line_count  "modifies.b3 vide"  0 "${outdir_t05}/modifies.b3"
  assert_line_count  "disparus.txt vide" 0 "${outdir_t05}/disparus.txt"
  assert_line_count  "nouveaux.txt vide" 0 "${outdir_t05}/nouveaux.txt"
  echo ""

  # ── T06 : Compare — fichier modifié ──────────────────────────────────────
  echo "T06 — Compare : fichier modifié"
  echo "contenu beta modifié" > data/beta.txt
  bash "$INTEGRITY" compute ./data base_t06.b3 > /dev/null 2>&1
  bash "$INTEGRITY" compare base_t01.b3 base_t06.b3 > /dev/null 2>&1

  local outdir_t06
  outdir_t06=$(ls -d "${RESULTATS_DIR}/resultats_base_t01"* 2>/dev/null | tail -1)
  assert_contains "modifies.b3 contient beta.txt" "beta.txt" "$(cat "${outdir_t06}/modifies.b3")"
  # Restauration
  echo "contenu beta" > data/beta.txt
  echo ""

  # ── T07 : Compare — suppression + ajout ──────────────────────────────────
  echo "T07 — Compare : fichier supprimé + fichier ajouté"
  bash "$INTEGRITY" compute ./data base_t07_old.b3 > /dev/null 2>&1
  rm data/alpha.txt
  echo "contenu epsilon" > data/epsilon.txt
  bash "$INTEGRITY" compute ./data base_t07_new.b3 > /dev/null 2>&1
  bash "$INTEGRITY" compare base_t07_old.b3 base_t07_new.b3 > /dev/null 2>&1

  local outdir_t07
  outdir_t07=$(ls -d "${RESULTATS_DIR}/resultats_base_t07_old"* 2>/dev/null | tail -1)
  assert_contains "disparus.txt contient alpha.txt"   "alpha.txt"   "$(cat "${outdir_t07}/disparus.txt")"
  assert_contains "nouveaux.txt contient epsilon.txt" "epsilon.txt" "$(cat "${outdir_t07}/nouveaux.txt")"
  # Restauration
  echo "contenu alpha" > data/alpha.txt
  rm data/epsilon.txt
  echo ""

  # ── T08 : Noms de fichiers avec espaces ───────────────────────────────────
  echo "T08 — Robustesse : nom de fichier avec espace"
  echo "contenu avec espace" > "data/fichier avec espace.txt"
  bash "$INTEGRITY" compute ./data base_t08.b3 > /dev/null 2>&1
  local out_t08
  out_t08=$(bash "$INTEGRITY" verify base_t08.b3 2>&1 || true)
  assert_not_contains "aucun FAILED" "FAILED" "$out_t08"
  rm "data/fichier avec espace.txt"
  echo ""

  # ── T09 : Dossier vide ignoré (limite documentée) ─────────────────────────
  echo "T09 — Limite : dossier vide ignoré"
  mkdir data/dossier_vide
  bash "$INTEGRITY" compute ./data base_t09.b3 > /dev/null 2>&1
  assert_not_contains "dossier_vide absent de la base" "dossier_vide" "$(cat base_t09.b3)"
  pass "comportement conforme à la documentation"
  rmdir data/dossier_vide
  echo ""

  # ── T10 : Chemin absolu vs relatif ───────────────────────────────────────
  echo "T10 — Chemin absolu vs relatif"
  find "$WORKDIR/data" -type f -print0 | sort -z | xargs -0 b3sum > base_absolu.b3
  find ./data          -type f -print0 | sort -z | xargs -0 b3sum > base_relatif.b3
  local first_abs first_rel
  first_abs=$(head -1 base_absolu.b3)
  first_rel=$(head -1 base_relatif.b3)
  assert_contains     "base absolue contient un chemin absolu"   "  /" "$first_abs"
  assert_contains     "base relative contient un chemin relatif" "\./data/" "$first_rel"
  assert_not_contains "bases non interchangeables" "$first_abs" "$first_rel"
  echo ""

  # ── T11 : compute_with_progress — intégrité de la base produite ───────────
  echo "T11 — ETA : la base produite est identique à une base de référence"
  find ./data -type f -print0 | sort -z | xargs -0 b3sum > base_ref.b3
  bash "$INTEGRITY" compute ./data base_eta.b3 > /dev/null 2>&1
  assert_exit_zero    "base ETA identique à la base de référence" diff base_ref.b3 base_eta.b3
  assert_not_contains "aucune ligne ETA dans la base"             "ETA"  "$(cat base_eta.b3)"
  assert_not_contains "aucun caractère de contrôle dans la base"  $'\r'  "$(cat base_eta.b3)"
  echo ""

  # ── T12 : Mode --quiet ────────────────────────────────────────────────────
  echo "T12 — Mode --quiet : aucune sortie terminal"
  bash "$INTEGRITY" compute ./data base_t12.b3 > /dev/null 2>&1

  local out_quiet_ok
  out_quiet_ok=$(bash "$INTEGRITY" --quiet verify base_t12.b3 2>&1 || true)
  assert_not_contains "--quiet verify OK : stdout vide" "OK"   "$out_quiet_ok"
  assert_not_contains "--quiet verify OK : stdout vide" "Résultats" "$out_quiet_ok"

  # Vérifier que les fichiers de résultats sont bien produits malgré --quiet
  local outdir_t12
  outdir_t12=$(ls -d "${RESULTATS_DIR}/resultats_base_t12"* 2>/dev/null | tail -1)
  assert_file_exists "recap.txt produit en mode --quiet" "${outdir_t12}/recap.txt"

  # --quiet avec échec : stdout toujours vide, fichiers produits, exit code non nul
  echo "contenu corrompu" > data/beta.txt
  local out_quiet_fail exit_quiet
  out_quiet_fail=$(bash "$INTEGRITY" --quiet verify base_t12.b3 2>&1 || true)
  bash "$INTEGRITY" --quiet verify base_t12.b3 > /dev/null 2>&1 && exit_quiet=0 || exit_quiet=$?
  assert_not_contains "--quiet verify ECHEC : stdout vide" "ECHEC"  "$out_quiet_fail"
  assert_not_contains "--quiet verify ECHEC : stdout vide" "FAILED" "$out_quiet_fail"

  local outdir_t12b
  outdir_t12b=$(ls -d "${RESULTATS_DIR}/resultats_base_t12"* 2>/dev/null | tail -1)
  assert_file_exists "failed.txt produit en mode --quiet" "${outdir_t12b}/failed.txt"

  if (( exit_quiet != 0 )); then
    pass "--quiet propage l'exit code non nul sur échec"
  else
    fail "--quiet propage l'exit code non nul sur échec (exit_quiet=$exit_quiet)"
  fi

  # Restauration
  echo "contenu beta" > data/beta.txt

  # --quiet compute : pas de sortie progression
  local out_quiet_compute
  out_quiet_compute=$(bash "$INTEGRITY" --quiet compute ./data base_t12c.b3 2>&1 || true)
  assert_not_contains "--quiet compute : stdout vide" "Base enregistrée" "$out_quiet_compute"
  assert_not_contains "--quiet compute : pas d'ETA"   "ETA"              "$out_quiet_compute"
  echo ""

  # ── T13 : Horodatage make_result_dir — pas d'écrasement ──────────────────
  echo "T13 — Horodatage : deux exécutions successives sur la même base"
  bash "$INTEGRITY" compute ./data base_t13.b3 > /dev/null 2>&1
  bash "$INTEGRITY" verify base_t13.b3 > /dev/null 2>&1 || true
  sleep 1
  bash "$INTEGRITY" verify base_t13.b3 > /dev/null 2>&1 || true
  local nb_resultats
  nb_resultats=$(ls -d "${RESULTATS_DIR}/resultats_base_t13"* 2>/dev/null | wc -l)
  if (( nb_resultats >= 2 )); then
    pass "deux dossiers distincts créés (pas d'écrasement)"
  else
    fail "écrasement détecté : $nb_resultats dossier(s) au lieu de >= 2"
  fi
  echo ""

  # ── T14 : verify avec [dossier] incorrect ────────────────────────────────
  echo "T14 — verify : dossier argument invalide détecté"
  local out_t14
  out_t14=$(bash "$INTEGRITY" verify base_t01.b3 /chemin/inexistant 2>&1 || true)
  assert_contains "erreur si dossier invalide" "ERREUR" "$out_t14"
  echo ""
}

# ── Main ──────────────────────────────────────────────────────────────────────

if ! command -v b3sum &> /dev/null; then
  echo -e "${RED}ERREUR${NC} : b3sum non trouvé. Installer avec : cargo install b3sum  ou  apt install b3sum"
  exit 1
fi

if [ ! -f "$INTEGRITY" ]; then
  echo -e "${RED}ERREUR${NC} : integrity.sh introuvable à : $INTEGRITY"
  exit 1
fi

setup
run_tests
teardown

# ── Rapport final ──────────────────────────────────────────────────────────────

echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
if [ "$FAIL" -eq 0 ]; then
  echo -e "  ${GREEN}$PASS/$TOTAL tests passés${NC}"
else
  echo -e "  ${GREEN}$PASS${NC}/${TOTAL} passés — ${RED}$FAIL échec(s)${NC}"
fi
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""

[ "$FAIL" -eq 0 ]

--- Fichier : docs/explication-run-tests.md ---
# Explication du code — run_tests.sh

---

## Vue d'ensemble

`run_tests.sh` est une suite de tests automatisée pour `integrity.sh`. Elle n'utilise aucun framework externe — uniquement du bash pur. Elle crée un environnement isolé, exécute 14 cas de test (T00–T14), restaure l'état entre chaque cas, puis nettoie.

```
run_tests.sh
├── Vérification des prérequis   (b3sum, integrity.sh)
├── setup()                      création de l'environnement de test
├── run_tests()                  exécution des 14 cas T00–T14
├── teardown()                   suppression de l'environnement
└── Rapport final                compteurs PASS/FAIL + exit code
```

---

## 1. Configuration et chemins

```bash
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
INTEGRITY="$SCRIPT_DIR/../integrity.sh"
WORKDIR="$(mktemp -d /tmp/integrity-test.XXXXXX)"
```

- `SCRIPT_DIR` : répertoire absolu du script lui-même, indépendant du répertoire depuis lequel on l'appelle.
- `INTEGRITY` : chemin vers `integrity.sh` calculé relativement à `run_tests.sh` — les deux scripts peuvent être déplacés ensemble sans modifier les chemins en dur.
- `WORKDIR` : répertoire temporaire unique créé par `mktemp`. Le suffixe `XXXXXX` est remplacé par 6 caractères aléatoires — garantit l'isolation entre deux exécutions simultanées.

---

## 2. Système de comptage

```bash
PASS=0
FAIL=0
TOTAL=0

pass() { echo -e "${GREEN}  PASS${NC} — $1"; ((PASS++)); ((TOTAL++)); }
fail() { echo -e "${RED}  FAIL${NC} — $1"; ((FAIL++)); ((TOTAL++)); }
```

Deux compteurs indépendants `PASS` et `FAIL`, incrémentés par les fonctions `pass()` et `fail()`. Chaque assertion appelle l'une ou l'autre — jamais les deux. `TOTAL` permet de vérifier qu'aucun test n'a été sauté silencieusement.

---

## 3. Fonctions d'assertion

Chaque assertion encapsule un test élémentaire et appelle `pass()` ou `fail()` selon le résultat.

### `assert_exit_zero` / `assert_exit_nonzero`

```bash
assert_exit_zero() {
  local label="$1"; shift
  if "$@" > /dev/null 2>&1; then pass "$label"; else fail "$label"; fi
}
```

Exécute une commande et vérifie son code de retour. `> /dev/null 2>&1` supprime stdout et stderr — seul le code de retour importe ici. `shift` consomme le premier argument (`label`) pour que `"$@"` ne contienne que la commande à exécuter.

`assert_exit_nonzero` fait l'inverse : il attend un échec (code ≠ 0). Utilisé pour vérifier que `b3sum --check` détecte bien une corruption.

### `assert_contains` / `assert_not_contains`

```bash
assert_contains() {
  local label="$1"
  local pattern="$2"
  local output="$3"
  if echo "$output" | grep -q "$pattern"; then pass "$label"; else fail "$label"; fi
}
```

Cherche un pattern dans une chaîne déjà capturée (pas dans un fichier). Le résultat de la commande est capturé avant l'appel via `local out=$(commande)` — ce qui permet de l'inspecter plusieurs fois sans relancer la commande.

### `assert_line_count`

```bash
assert_line_count() {
  local expected="$2"
  local actual; actual=$(wc -l < "$3")
  if [ "$actual" -eq "$expected" ]; then pass "$label"; else fail "$label"; fi
}
```

Compte les lignes d'un fichier avec `wc -l`. La redirection `< fichier` (sans passer le nom à `wc`) évite que `wc` affiche le nom du fichier dans sa sortie.

### `assert_file_exists` / `assert_file_absent`

```bash
assert_file_exists() {
  local label="$1"
  local file="$2"
  if [ -f "$file" ]; then pass "$label"; else fail "$label (fichier absent : $file)"; fi
}

assert_file_absent() {
  local label="$1"
  local file="$2"
  if [ ! -f "$file" ]; then pass "$label"; else fail "$label (fichier présent à tort : $file)"; fi
}
```

Vérifient la présence ou l'absence d'un fichier. `assert_file_absent` est utilisé pour confirmer qu'un fichier comme `failed.txt` n'est pas créé inutilement après une vérification réussie.

---

## 4. Setup et teardown

```bash
setup() {
  mkdir -p "$WORKDIR/data/sub"
  echo "contenu alpha"  > "$WORKDIR/data/alpha.txt"
  echo "contenu beta"   > "$WORKDIR/data/beta.txt"
  echo "contenu gamma"  > "$WORKDIR/data/gamma.txt"
  echo "contenu delta"  > "$WORKDIR/data/sub/delta.txt"
}

teardown() {
  rm -rf "$WORKDIR"
}
```

`setup()` crée 4 fichiers avec contenu connu et déterministe — leurs hashes sont donc reproductibles d'une exécution à l'autre. `sub/delta.txt` teste la récursivité de `find` dans les sous-dossiers.

`teardown()` supprime le `WORKDIR` entier. Appelé en fin de script, même en cas d'échec partiel (voir section 7).

---

## 5. Structure d'un cas de test

Chaque cas suit le même schéma :

```bash
echo "T0X — Description"

# 1. Préparer l'état (modifier fichiers, créer bases...)
# 2. Exécuter la commande testée, capturer la sortie
local out; out=$(commande 2>&1 || true)
# 3. Lancer les assertions
assert_xxx "label" "pattern" "$out"
# 4. Restaurer l'état pour les tests suivants
echo "contenu original" > data/fichier.txt
echo ""
```

Le `|| true` après la commande capturée est critique : sans lui, si la commande retourne un code non nul (ex: `b3sum --check` sur un fichier corrompu), le mode `-euo pipefail` du script parent interromprait l'exécution avant que l'assertion puisse enregistrer le résultat.

---

## 6. Cas de test spécifiques

### T00 — ShellCheck (analyse statique)

Premier test exécuté. Invoque ShellCheck sur `integrity.sh` et `run_tests.sh` pour détecter les bugs bash courants (variables non quotées, globbing non contrôlé, problèmes de portabilité).

Si ShellCheck n'est pas installé, le test affiche `SKIP` sans bloquer l'exécution — c'est une vérification additionnelle, pas une dépendance stricte.

```bash
if command -v shellcheck &> /dev/null; then
  assert_exit_zero "ShellCheck integrity.sh" shellcheck "$INTEGRITY"
  assert_exit_zero "ShellCheck run_tests.sh" shellcheck "$0"
else
  echo "  SKIP — shellcheck non installé"
fi
```

### T11 — Intégrité de la base produite par `compute_with_progress`

Test critique post-intégration ETA. Vérifie trois choses indépendantes :

1. La base produite par `compute_with_progress` est **bit-à-bit identique** à une base de référence produite par `find | sort | xargs b3sum` — via `diff`. Si un fichier est manquant, dupliqué, ou dans le mauvais ordre, `diff` le détecte.
2. La base ne contient **aucune ligne "ETA"** parasite — le `printf "\r..."` écrit sur le terminal (stderr implicite via `/dev/tty`), pas dans le fichier.
3. La base ne contient **aucun caractère `\r`** — garantit que la progression n'a pas pollué le flux d'écriture.

```bash
assert_exit_zero    "base ETA identique à la base de référence" diff base_ref.b3 base_eta.b3
assert_not_contains "aucune ligne ETA dans la base"             "ETA"  "$(cat base_eta.b3)"
assert_not_contains "aucun caractère de contrôle dans la base"  $'\r'  "$(cat base_eta.b3)"
```

### T12 — Mode `--quiet`

Couverture exhaustive du flag `--quiet` :

- **Verify OK en mode `--quiet`** : stdout vide, fichiers de résultats produits (`recap.txt`).
- **Verify ECHEC en mode `--quiet`** : stdout vide, `failed.txt` créé, exit code non nul propagé.
- **Compute en mode `--quiet`** : pas de ligne "Base enregistrée", pas d'ETA dans la sortie.

La résolution des dossiers de résultats (`outdir`) utilise `ls -d ... | tail -1` pour récupérer le dernier dossier créé, compatible avec l'horodatage automatique introduit dans cette version.

### T13 — Horodatage des dossiers de résultats

Vérifie qu'exécuter deux fois `verify` sur la même base `.b3` ne produit pas un écrasement silencieux des résultats. Deux dossiers distincts doivent être créés :

- `resultats_base_t13/`
- `resultats_base_t13_YYYYMMDD-HHMMSS/`

Un `sleep 1` entre les deux appels garantit un timestamp différent.

### T14 — Détection d'argument invalide pour `verify [dossier]`

Confirme que `verify` détecte et rejette un argument `[dossier]` invalide (chemin inexistant ou non-dossier) avec un message d'erreur explicite.

---

## 7. Vérification des prérequis

```bash
if ! command -v b3sum &> /dev/null; then
  echo -e "${RED}ERREUR${NC} : b3sum non trouvé."
  exit 1
fi

if [ ! -f "$INTEGRITY" ]; then
  echo -e "${RED}ERREUR${NC} : integrity.sh introuvable à : $INTEGRITY"
  exit 1
fi
```

Vérifié avant `setup()` — inutile de créer l'environnement de test si les outils sont absents. `command -v` est la méthode portable pour tester la présence d'un exécutable (préférable à `which`).

---

## 8. Exit code et intégration CI

```bash
[ "$FAIL" -eq 0 ]
```

Dernière ligne du script. Si `FAIL` vaut 0, l'expression est vraie → exit code 0. Si au moins un test a échoué → exit code 1. Ce comportement est exploitable directement dans un pipeline :

```bash
# Hook pre-commit git
./tests/run_tests.sh || exit 1

# CI/CD pipeline
./tests/run_tests.sh && deploy_artifacts

# Crontab — alerte si régression
0 3 * * * /opt/integrity/tests/run_tests.sh >> /var/log/integrity-tests.log 2>&1 || mail -s "Tests failed" admin@example.com
```

---

## 9. Couverture de test

Les 14 cas couvrent :

| Cas | Périmètre |
|---|---|
| T00 | Analyse statique ShellCheck |
| T01 | Compute de base, format de sortie |
| T02 | Verify sans modification, absence de `failed.txt` |
| T03 | Verify après corruption, présence de `failed.txt` |
| T04 | Verify après suppression de fichier |
| T05 | Compare sans différence |
| T06 | Compare avec fichier modifié |
| T07 | Compare avec fichier supprimé + ajouté |
| T08 | Noms de fichiers avec espaces |
| T09 | Dossiers vides ignorés (limite documentée) |
| T10 | Chemins absolus vs relatifs |
| T11 | Intégrité de la base avec ETA |
| T12 | Mode `--quiet` (stdout vide, exit code) |
| T13 | Horodatage anti-écrasement |
| T14 | Détection argument invalide |

**Aucun mocking.** Tous les tests exécutent réellement `b3sum` et `integrity.sh` sur des fichiers réels dans un environnement isolé.

--- Fichier : docs/manuel.md ---
# Manuel technique — Vérification d'intégrité de données

**Périmètre :** détection d'erreurs de transfert et de corruption silencieuse sur disque, sans adversaire.  
**Outils couverts :** b3sum (BLAKE3) · xxHash3 · find · diff · bash

---

## Table des matières

1. [Algorithmes de hachage](#1-algorithmes-de-hachage)
2. [Structure du fichier .b3](#2-structure-du-fichier-b3)
3. [Workflow : calcul, stockage, comparaison](#3-workflow--calcul-stockage-comparaison)
4. [Explication du script integrity.sh](#4-explication-du-script-integritysh)
5. [Performances et optimisation disque](#5-performances-et-optimisation-disque)
6. [Limites et angles morts](#6-limites-et-angles-morts)
7. [Référence rapide](#7-référence-rapide)
8. [Annexe — Alternatives et extensions](#8-annexe--alternatives-et-extensions)

---

## 1. Algorithmes de hachage

### Taxonomie

Deux familles distinctes, usages mutuellement exclusifs :

| Propriété | Cryptographique (BLAKE3) | Non-cryptographique (xxHash3) |
|---|---|---|
| Résistance collision intentionnelle | Oui — infaisable calculatoirement | Non — collisions construisibles |
| Résistance préimage | Oui | Non |
| Débit CPU (1 cœur) | ~1 Go/s | ~50 Go/s |
| Débit sur HDD (150 Mo/s) | Identique — disque impose le rythme | Identique |
| Débit sur SATA SSD (500 Mo/s) | Identique | Identique |
| Détection corruption accidentelle | Oui | Oui |
| Utilisable en sécurité | Oui | Non |

### Pourquoi BLAKE3 plutôt que xxHash3

xxHash3 est techniquement suffisant pour détecter des erreurs accidentelles. BLAKE3 est recommandé pour une seule raison : **le coût marginal sur disque est nul** — les deux sont limités par l'I/O. BLAKE3 reste utilisable si le besoin évolue vers un contexte de sécurité. Headroom gratuit.

```bash
# Si xxHash3 est préféré — workflow identique à b3sum
find ./dossier -type f -print0 | sort -z | xargs -0 xxh128sum > base.xxh
```

### Limitations spécifiques à ce workflow

- Ne hache pas les métadonnées (mtime, permissions) — comportement voulu ici, mais à connaître.
- Ne hache pas les dossiers vides : `find -type f` ne remonte que les fichiers réguliers.
- Sensible aux chemins : le fichier `.b3` encode les chemins tels qu'ils ont été passés à `b3sum`. Chemin absolu vs relatif → deux bases incompatibles pour la même donnée.

---

## 2. Structure du fichier .b3

b3sum produit un format texte simple, une ligne par fichier :

```
# Format : <hash>  <chemin>
# Deux espaces séparent le hash du chemin (convention b3sum/sha256sum)

a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2  ./dossier/fichier.txt
e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2c3d4e5f6  ./dossier/sous/autre.bin
```

**Taille du fichier .b3 :** chaque ligne fait ~130–200 octets selon la longueur des chemins.

| Nombre de fichiers | Taille approximative |
|---|---|
| 10 000 | ~2 Mo |
| 100 000 | ~20 Mo |
| 1 000 000 | ~200 Mo |

> **Règle absolue : chemins relatifs.** Toujours utiliser `find ./dossier` et non `find /chemin/absolu/dossier`. Un chemin absolu rend la base inutilisable après déplacement, remontage à un point différent, ou copie sur une autre machine.

---

## 3. Workflow : calcul, stockage, comparaison

### Calcul et enregistrement de la base

```bash
# Calcul de base — commande de référence
find ./mon_dossier -type f -print0 \
  | sort -z \
  | xargs -0 b3sum \
  > hashes_2024-01-15.b3

# Vérification immédiate : nombre de fichiers indexés
wc -l hashes_2024-01-15.b3
```

**Pourquoi `sort -z` :** `find` ne garantit pas un ordre déterministe — il dépend de l'ordre de parcours du filesystem (inode order sur ext4). Sans tri, deux exécutions consécutives peuvent produire des fichiers `.b3` dans des ordres différents, rendant la comparaison par `diff` bruyante et inutilisable.

**Pourquoi `-print0` / `-0` :** les noms de fichiers peuvent contenir des espaces, des retours à la ligne, ou des caractères spéciaux. `-print0` utilise le caractère nul comme séparateur, et `-0` dans `xargs` l'interprète. C'est la seule approche robuste.

### Vérification directe

`b3sum --check` relit les fichiers sur disque et compare leurs hashes à la base enregistrée.

```bash
# Lancer depuis le même répertoire de travail qu'au calcul
b3sum --check hashes_2024-01-15.b3

# Sortie en cas de succès :
# ./mon_dossier/fichier.txt: OK
# ./mon_dossier/sous/autre.bin: OK

# Sortie en cas d'échec :
# ./mon_dossier/sous/corrompu.bin: FAILED
# b3sum: WARNING: 1 computed checksum did NOT match

# Filtrer uniquement les échecs
b3sum --check hashes_2024-01-15.b3 2>&1 | grep FAILED
```

> **Contrainte critique : répertoire de travail.** `b3sum --check` résout les chemins relatifs depuis `pwd`. Si la base a été créée depuis `/data` et que la vérification est lancée depuis `/home`, tous les fichiers apparaissent manquants. Toujours exécuter depuis le répertoire parent du dossier à vérifier.

### Comparaison de deux bases .b3

Utile pour comparer deux états historiques sans avoir accès aux fichiers originaux (archive froide, backup distant).

```bash
# Diff brut — suffisant si les bases sont triées
diff <(sort hashes_2024-01-15.b3) <(sort hashes_2024-02-01.b3)

# Comparaison propre par fichier
sort -k2 hashes_2024-01-15.b3 > /tmp/_old.b3
sort -k2 hashes_2024-02-01.b3 > /tmp/_new.b3

# Fichiers dont le hash a changé
join -1 2 -2 2 /tmp/_old.b3 /tmp/_new.b3 \
  | awk '$2 != $3 {print $1, "\n  ancien:", $3, "\n  nouveau:", $2}'

# Fichiers disparus
comm -23 <(awk '{print $2}' /tmp/_old.b3) \
         <(awk '{print $2}' /tmp/_new.b3)

# Fichiers nouveaux
comm -13 <(awk '{print $2}' /tmp/_old.b3) \
         <(awk '{print $2}' /tmp/_new.b3)
```

**`join -1 2 -2 2` :** joint les deux fichiers sur la colonne 2 (nom de fichier), puis compare les colonnes 1 (hash). Les lignes où `$2 != $3` sont les fichiers dont le contenu a changé.

**`comm` :** compare deux flux triés ligne par ligne. `-23` retient les lignes exclusives au premier flux (disparus). `-13` retient les lignes exclusives au second (nouveaux).

---

## 4. Explication du script integrity.sh

### En-tête et mode strict

```bash
#!/usr/bin/env bash
set -euo pipefail
```

`set -euo pipefail` est le mode strict Bash :

- `-e` : le script s'arrête si une commande échoue.
- `-u` : erreur si une variable non initialisée est utilisée.
- `-o pipefail` : si une commande dans un pipeline échoue, le pipeline entier échoue.

### Lecture des arguments

```bash
MODE=${1:-}
ARG2=${2:-}
ARG3=${3:-}
```

Récupère les 3 arguments positionnels. `:-` donne une valeur vide par défaut si l'argument n'est pas fourni — évite une erreur en mode `-u`.

### Mode `compute`

Le mode `compute` délègue à `compute_with_progress`, fonction dédiée à l'indexation fichier par fichier avec affichage de la progression.

```bash
TARGET=$ARG2
HASHFILE=$ARG3
compute_with_progress "$TARGET" "$HASHFILE"
echo "Base enregistrée : $HASHFILE ($(wc -l < "$HASHFILE") fichiers)"
```

**Pourquoi une fonction séparée :** la logique de progression représente ~20 lignes. Les inliner dans le `case` dégraderait la lisibilité du dispatch sans apport. La fonction est nommée explicitement — son rôle est lisible sans lire son corps.

**Corps de `compute_with_progress` :**

```bash
compute_with_progress() {
  local target="$1"
  local hashfile="$2"

  local -a files
  mapfile -d '' files < <(find "$target" -type f -print0 | sort -z)

  local total_files=${#files[@]}
  local total_bytes
  total_bytes=$(du -sb "$target" | awk '{print $1}')

  local bytes_done=0
  local t_start
  t_start=$(date +%s)

  local i=0
  for file in "${files[@]}"; do
    b3sum "$file" >> "$hashfile"

    bytes_done=$(( bytes_done + $(stat -c%s "$file") ))
    i=$(( i + 1 ))

    local t_now elapsed
    t_now=$(date +%s)
    elapsed=$(( t_now - t_start ))

    if (( bytes_done > 0 && elapsed > 0 )); then
      local speed remaining
      speed=$(( bytes_done / elapsed ))
      remaining=$(( (total_bytes - bytes_done) / speed ))
      printf "\r[%d/%d] ETA : %dm %02ds   " \
        "$i" "$total_files" $(( remaining / 60 )) $(( remaining % 60 ))
    fi
  done

  printf "\r%*s\r" 40 ""  # effacer la ligne de progression
}
```

Points clés :

- `mapfile -d ''` charge les chemins dans un tableau en respectant le séparateur nul — gère les noms de fichiers avec espaces ou caractères spéciaux.
- `>> "$hashfile"` en append : chaque `b3sum "$file"` ajoute une ligne. Le fichier est créé vide implicitement à la première écriture.
- `stat -c%s` lit la taille en octets du fichier traité — opération metadata uniquement, sans relecture du contenu.
- `printf "\r..."` écrase la ligne courante sans sauter de ligne — la progression ne pollue pas stdout.
- `printf "\r%*s\r" 40 ""` efface proprement la ligne de progression avant le message final.

### Mode `verify`

```bash
HASHFILE=$ARG2
# ARG3 optionnel : si fourni, cd dans ce dossier avant b3sum --check
if [ -n "$ARG3" ]; then cd "$ARG3"; fi
run_verify "$HASHFILE"
```

Le paramètre `[dossier]` est optionnel. Il résout le cas où la base `.b3` a été calculée depuis un répertoire différent du répertoire courant : plutôt que de naviguer manuellement avant de lancer le script, on passe le dossier directement.

```bash
# Sans dossier — doit être lancé depuis le répertoire d'origine du compute
./integrity.sh verify hashes.b3

# Avec dossier — spécifie explicitement le répertoire de travail
# Le dossier passé doit être le répertoire DEPUIS LEQUEL le compute a été lancé,
# pas le dossier cible qui a été haché.
#
# Exemple : compute lancé depuis /data → chemins dans le .b3 : ./mon_dossier/...
#   Correct   : ./integrity.sh verify hashes.b3 /data
#   Incorrect : ./integrity.sh verify hashes.b3 /data/mon_dossier
./integrity.sh verify hashes.b3 /data
```

### Mode `compare`

Délègue à `run_compare` qui trie les deux bases, produit quatre fichiers dans `$RESULTATS_DIR/resultats_<nom_base_ancienne>/` :

- `recap.txt` — commande, date, compteurs modifiés/disparus/nouveaux
- `modifies.b3` — lignes b3sum des fichiers dont le hash a changé (format hash + chemin, réutilisable)
- `disparus.txt` — chemins présents dans A absents de B
- `nouveaux.txt` — chemins présents dans B absents de A

Les fichiers temporaires de tri passent par `mktemp` et sont supprimés après usage — pas de résidu dans `/tmp`.

---

## 5. Performances et optimisation disque

### Le goulot est le disque, pas l'algorithme

Sur toute configuration réaliste, l'I/O disque est le facteur limitant. BLAKE3 (~1 Go/s/cœur) ne sera jamais le goulot sur HDD ou SATA SSD.

| Support | Débit typique | Temps lecture 2 To | BLAKE3 est goulot ? |
|---|---|---|---|
| HDD 7200 rpm | 100–150 Mo/s | 4–6 heures | Non |
| SATA SSD | 500 Mo/s | ~1 heure | Non |
| NVMe Gen3 | 2–3 Go/s | 12–17 min | Non (1 Go/s/cœur) |
| NVMe Gen4+ | 5–7 Go/s | 5–7 min | Possible |

**RAM :** b3sum + find + xargs consomment quelques mégaoctets. BLAKE3 traite les fichiers en streaming par chunks de 1 Ko — la taille des fichiers n'influence pas la consommation mémoire. 1 Go de RAM est largement suffisant.

### Stratégie HDD — séquentiel obligatoire

Un HDD est optimisé pour les accès séquentiels. Les accès concurrents cassent la séquentialité de lecture et imposent des déplacements mécaniques de tête coûteux. `xargs -P 4` sur HDD dégrade typiquement les performances de 30 à 50 %. La boucle fichier par fichier de `compute_with_progress` est séquentielle par construction — comportement optimal sur HDD.

Le disque est systématiquement le goulot. BLAKE3 (~1 Go/s/cœur) ne limite jamais sur HDD (100–150 Mo/s) ni sur SATA SSD (500 Mo/s). Sur NVMe Gen4+ (5–7 Go/s), BLAKE3 monothread peut devenir limitant — cas hors périmètre de ce workflow.

### Estimations de durée par volume

| Volume | HDD (150 Mo/s) | SATA SSD (500 Mo/s) | NVMe (3 Go/s) |
|---|---|---|---|
| 100 Go | ~11 min | ~3 min | ~34 sec |
| 500 Go | ~56 min | ~17 min | ~3 min |
| 1 To | ~1h 51min | ~34 min | ~6 min |
| 2 To | ~3h 42min | ~1h 8min | ~11 min |
| 10 To | ~18h 30min | ~5h 40min | ~57 min |

Durées indicatives, pipeline monothread. Sur SSD avec `-P 4`, diviser par 2–3.

---

## 6. Limites et angles morts

### Ce que ce workflow ne couvre pas

| Scénario | Détecté ? | Explication |
|---|---|---|
| Fichier corrompu (contenu modifié) | **Oui** | Hash différent → FAILED ou divergence dans compare |
| Fichier manquant | **Oui** | Absent de la nouvelle base ou FAILED (No such file) |
| Fichier ajouté | **Oui** (compare) | Section NOUVEAUX |
| Dossier vide ajouté/supprimé | **Non** | `find -type f` ignore les dossiers vides |
| Modification de permissions/timestamps | **Non** | b3sum ne hache que le contenu binaire |
| Fichier remplacé par un clone identique | **Non** | Hash identique — indétectable par définition |
| Corruption de la base .b3 elle-même | **Non** | La base n'est pas auto-protégée |
| Corruption pendant la lecture pour hachage | **Non** | Le hash reflète la donnée lue, corrompue ou non |

### Protéger la base de hash

La base `.b3` est le référentiel de confiance. Si elle est corrompue ou altérée, toute comparaison ultérieure est sans valeur.

- Stocker la base sur un support distinct des données à vérifier.
- Hacher la base elle-même et stocker ce méta-hash sur un troisième support (email, cloud, papier imprimé).
- Horodater les bases avec un schéma de nommage explicite : `hashes_2024-01-15.b3`, jamais `hashes_latest.b3`.
- En contexte critique, signer la base avec GPG.

```bash
# Protéger la base par son propre hash
b3sum hashes_2024-01-15.b3 > hashes_2024-01-15.b3.check

# Vérification ultérieure de l'intégrité de la base elle-même
b3sum --check hashes_2024-01-15.b3.check
```

### Le problème des renommages et changements de chemin

`b3sum --check` compare les chemins littéralement. Tout renommage de dossier ou changement de structure rompt la correspondance, même si les données sont intactes.

```bash
# Situation : dossier renommé entre compute et verify
# Calcul depuis :  ./mon_projet/
# Vérification :   ./projet_final/

b3sum --check base.b3
# Résultat : FAILED (No such file or directory) sur TOUS les fichiers
# Le hash est correct — c'est le chemin qui a changé.

# Solution : corriger les chemins dans la base avant vérification
sed 's|./mon_projet/|./projet_final/|g' base.b3 > base_corrigee.b3
b3sum --check base_corrigee.b3
```

---

## 7. Référence rapide

### Commandes essentielles

```bash
# Calcul de base (universel, HDD)
find ./dossier -type f -print0 | sort -z | xargs -0 b3sum > base.b3

# Vérification directe (état actuel vs base) → résultats dans RESULTATS_DIR
./integrity.sh verify base.b3

# Filtrer uniquement les échecs en terminal
./integrity.sh verify base.b3 2>&1 | grep FAILED

# Comparaison deux bases → résultats dans RESULTATS_DIR
./integrity.sh compare ancienne.b3 nouvelle.b3

# Compter les fichiers indexés
wc -l base.b3

# Hacher un fichier unique
b3sum fichier.bin

# Protéger la base elle-même
b3sum base.b3 > base.b3.check
```

### Arbre de décision

| Situation | Mode | Commande |
|---|---|---|
| Première indexation | compute | `./integrity.sh compute ./dossier base.b3` |
| Vérifier après transfert/stockage | verify | `./integrity.sh verify base.b3` |
| Comparer deux archives | compare | `./integrity.sh compare old.b3 new.b3` |
| Contrôle rapide d'un seul fichier | ad hoc | `b3sum fichier.bin` |

---

## 8. Annexe — Alternatives et extensions

### A.1 Outils FIM si le besoin évolue vers la sécurité

Si le périmètre évolue vers une surveillance continue ou un contexte de sécurité active, les outils FIM dédiés remplacent ce workflow artisanal.

| Outil | Usage | Complexité | Pertinent si… |
|---|---|---|---|
| Tripwire | Audit système local, détection compromissions post-intrusion | Moyenne | Serveur Linux, conformité PCI-DSS/HIPAA |
| Samhain | FIM distribué, parc multi-hôtes, alertes SIEM | Élevée | Infrastructure d'entreprise |
| AIDE | Alternative open source à Tripwire | Moyenne | Remplacement direct de Tripwire |
| ZFS | Filesystem avec checksum natif sur chaque bloc | Faible (si migration possible) | Protection transparente sans workflow explicite |

La ligne de démarcation structurante : b3sum/xxHash3 sont des **primitives** — ils font ce qu'on leur demande, sans contexte. Tripwire et Samhain sont des **systèmes** — ils maintiennent un état de référence et détectent les dérives.

### A.2 Intégration dans un pipeline automatisé

```bash
# Crontab — vérification hebdomadaire automatique
0 2 * * 0 /opt/integrity.sh verify ./donnees /var/lib/integrity/base.b3 >> /var/log/integrity.log 2>&1

# Post-transfert rsync — vérification immédiate après copie
rsync -av source/ dest/ && b3sum --check base.b3

# Alerte email si des fichiers ont échoué
b3sum --check base.b3 2>&1 | grep FAILED | mail -s 'Alerte intégrité' admin@example.com
```

--- Fichier : docs/progression-eta.md ---
# Progression temps réel et estimation ETA

## Le problème

Le pipeline `find | sort | xargs b3sum` est une boîte noire : `b3sum` ne remonte aucune progression. Par défaut, le mode `compute` s'exécute en silence jusqu'à complétion - aucun indicateur de durée ni d'avancement.

---

## Pourquoi l'ETA nécessite de casser le pipeline `xargs`

Intercaler `pv` dans le pipeline existant est techniquement possible mais inutilisable ici : mesurer le débit sur un flux `cat | pv | b3sum` produit un hash global du flux concaténé, pas une ligne par fichier. Le fichier `.b3` résultant est invalide pour `--check` ou `compare`.

```bash
# Cette approche est invalide - ne pas utiliser
TOTAL=$(find "$TARGET" -type f -print0 | xargs -0 du -sb | awk '{sum+=$1} END {print sum}')
find "$TARGET" -type f -print0 | sort -z \
  | xargs -0 cat \
  | pv -s "$TOTAL" \
  | b3sum \
  > "$HASHFILE"
# Produit un hash unique du flux concaténé - inutilisable
```

La seule approche compatible avec le format `.b3` : remplacer `xargs` par une boucle bash explicite, fichier par fichier. Le contrôle de progression devient trivial. Le coût en performance est négligeable - le disque est le goulot, pas le shell.

---

## Implémentation finale : `compute_with_progress`

```bash
compute_with_progress() {
  local target="$1"
  local hashfile="$2"

  local -a files
  mapfile -d '' files < <(find "$target" -type f -print0 | sort -z)

  local total_files=${#files[@]}
  local total_bytes
  total_bytes=$(du -sb "$target" | awk '{print $1}')

  local bytes_done=0
  local t_start
  t_start=$(date +%s)

  local i=0
  for file in "${files[@]}"; do
    b3sum "$file" >> "$hashfile"

    bytes_done=$(( bytes_done + $(stat -c%s "$file") ))
    i=$(( i + 1 ))

    local t_now elapsed
    t_now=$(date +%s)
    elapsed=$(( t_now - t_start ))

    if (( bytes_done > 0 && elapsed > 0 )); then
      local speed remaining
      speed=$(( bytes_done / elapsed ))
      remaining=$(( (total_bytes - bytes_done) / speed ))
      printf "\r[%d/%d] ETA : %dm %02ds   " \
        "$i" "$total_files" $(( remaining / 60 )) $(( remaining % 60 ))
    fi
  done

  printf "\r%*s\r" 40 ""  # effacer la ligne de progression
}
```

**`mapfile -d ''`** au lieu de `FILES=($(find ...))` : la substitution de commande `$(...)` découpe sur les espaces et les retours à la ligne - les noms de fichiers avec espaces seraient cassés en plusieurs éléments. `mapfile -d ''` lit le flux nul-séparé produit par `-print0` et charge chaque chemin comme un élément distinct du tableau, sans ambiguïté.

---

## Mécanique de l'estimation

L'ETA repose sur trois mesures :

- **octets traités** - cumulés après chaque fichier via `stat -c%s`
- **octets totaux** - calculés une fois avant la boucle via `du -sb`
- **débit instantané** - `octets_traités / secondes_écoulées`

```
ETA = (octets_restants) / débit_moyen
    = (total - fait) / (fait / elapsed)
```

Le débit moyen converge après ~10–20 secondes de traitement. Avant ce seuil, l'ETA est instable - comportement identique à `rsync`, `cp --progress`, ou tout outil du même type. Ce n'est pas un défaut d'implémentation, c'est une contrainte statistique inhérente à toute estimation par extrapolation linéaire sur fenêtre courte.

---

## Coût du changement de stratégie

| | Pipeline `xargs` | Boucle bash (avec progression) |
|---|---|---|
| Débit sur HDD | Optimal | Identique - I/O impose le rythme |
| Débit sur SSD séquentiel | Optimal | Identique |
| Débit sur SSD `-P 4` | +20–40 % | Non applicable - boucle séquentielle |
| Progression temps réel | Non | Oui |
| ETA | Non | Oui |

**Cas où la boucle dégrade les performances :** SSD avec `-P 4`. Le parallélisme par `xargs` n'est pas reproductible en boucle bash sans complexité significative. Sur HDD - cas le plus courant pour de gros volumes - la différence est nulle.


--- Fichier : docs/validation.md ---
# Tests et validation - integrity.sh

**Niveau d'exigence :** production, admin système. Chaque cas doit être exécuté et son résultat vérifié explicitement.

---

## Environnement de test

```bash
# Créer un environnement de test isolé
mkdir -p /tmp/integrity-test/{data,output}
cd /tmp/integrity-test

# Créer des fichiers de test avec contenu connu
echo "contenu alpha" > data/alpha.txt
echo "contenu beta"  > data/beta.txt
echo "contenu gamma" > data/gamma.txt
mkdir -p data/sub
echo "contenu delta" > data/sub/delta.txt
```

---

## Cas de test

### T01 - Compute de base

```bash
./integrity.sh compute ./data base_t01.b3
```

**Résultat attendu :**

- Fichier `base_t01.b3` créé avec 4 lignes (une par fichier).
- Message `Base enregistrée : base_t01.b3 (4 fichiers)`.
- Chaque ligne au format `<hash64chars>  ./data/<chemin>`.

```bash
# Vérification
wc -l base_t01.b3           # → 4
head -1 base_t01.b3         # → hash + chemin lisibles
```

---

### T02 - Verify sans modification

```bash
b3sum --check base_t01.b3
```

**Résultat attendu :** 4 lignes `OK`, aucun `FAILED`, exit code 0.

```bash
echo $?   # → 0
```

---

### T03 - Verify après corruption d'un fichier

```bash
echo "contenu modifié" > data/beta.txt
b3sum --check base_t01.b3
```

**Résultat attendu :**

- `./data/beta.txt: FAILED`
- `b3sum: WARNING: 1 computed checksum did NOT match`
- Exit code non nul.

```bash
echo $?   # → 1
b3sum --check base_t01.b3 2>&1 | grep FAILED   # → ./data/beta.txt: FAILED
```

---

### T04 - Verify après suppression d'un fichier

```bash
# Restaurer l'état T01 d'abord
echo "contenu beta" > data/beta.txt

# Supprimer un fichier
rm data/gamma.txt
b3sum --check base_t01.b3
```

**Résultat attendu :**

- `./data/gamma.txt: FAILED` (No such file or directory)
- Exit code non nul.

---

### T05 - Compare : aucune différence

```bash
# Restaurer l'état T01
echo "contenu gamma" > data/gamma.txt

# Créer une seconde base identique
./integrity.sh compute ./data base_t05.b3
./integrity.sh compare base_t01.b3 base_t05.b3
```

**Résultat attendu :** sections `MODIFIÉS`, `DISPARUS`, `NOUVEAUX` toutes vides. Rapport sauvegardé.

---

### T06 - Compare : fichier modifié

```bash
echo "contenu beta modifié" > data/beta.txt
./integrity.sh compute ./data base_t06.b3
./integrity.sh compare base_t01.b3 base_t06.b3
```

**Résultat attendu :**

- Section `FICHIERS MODIFIÉS` contient `./data/beta.txt` avec ancien et nouveau hash.
- Sections `DISPARUS` et `NOUVEAUX` vides.

---

### T07 - Compare : fichier supprimé + fichier ajouté

```bash
# Repartir d'une base propre
echo "contenu beta" > data/beta.txt
./integrity.sh compute ./data base_t07_old.b3

# Modifier l'état
rm data/alpha.txt
echo "contenu epsilon" > data/epsilon.txt
./integrity.sh compute ./data base_t07_new.b3

./integrity.sh compare base_t07_old.b3 base_t07_new.b3
```

**Résultat attendu :**

- `DISPARUS` : `./data/alpha.txt`
- `NOUVEAUX` : `./data/epsilon.txt`
- `MODIFIÉS` : vide

---

### T08 - Robustesse : fichier avec espace dans le nom

```bash
echo "contenu avec espace" > "data/fichier avec espace.txt"
./integrity.sh compute ./data base_t08.b3
b3sum --check base_t08.b3
```

**Résultat attendu :** tous les fichiers `OK`, y compris `fichier avec espace.txt`.

---

### T09 - Robustesse : dossier vide (limite connue)

```bash
mkdir data/dossier_vide
./integrity.sh compute ./data base_t09.b3
```

**Résultat attendu :** `dossier_vide` absent de `base_t09.b3`. Comportement normal et documenté - `find -type f` n'indexe pas les dossiers vides.

---

### T10 - Chemin absolu vs relatif (piège critique)

```bash
# Calculer avec chemin absolu - mauvaise pratique
b3sum $(find /tmp/integrity-test/data -type f) > base_absolu.b3
head -1 base_absolu.b3   # → chemin absolu /tmp/integrity-test/data/...

# Calculer avec chemin relatif - bonne pratique
cd /tmp/integrity-test
find ./data -type f -print0 | sort -z | xargs -0 b3sum > base_relatif.b3
head -1 base_relatif.b3  # → chemin relatif ./data/...
```

**Résultat attendu :** les deux bases sont incompatibles entre elles. Confirme que les chemins absolus cassent la portabilité.

---

## Nettoyage

```bash
rm -rf /tmp/integrity-test
```

---

## Critères de qualité globaux

| Critère | Exigence |
|---|---|
| Détection corruption | 100 % des fichiers modifiés détectés (T03) |
| Détection suppression | 100 % des fichiers manquants détectés (T04) |
| Faux positifs | Zéro - verify sur base intacte = 100 % OK (T02) |
| Noms avec espaces | Traités sans erreur (T08) |
| Rapport compare | Sauvegardé sur disque, horodaté (T05–T07) |
| Exit code | Non nul si au moins un FAILED (T03, T04) |
| Mode strict `-euo pipefail` | Le script s'arrête sur toute erreur non gérée |


